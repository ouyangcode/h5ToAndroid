<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="./css/index.css?type=1.1.5" />
</head>

<body>
    <div class="main">
        <div class="automatic_login_ns">
            <div class="login_logo_ns">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="login_inp_ns">
                <div class="select_use">
                    <span class="sel-img iconfont"></span>
                    <span class="sel-title"></span>
                    <span class="sel-down iconfont icon-xiala"></span>
                    <span class="sel-up iconfont icon-xiala"></span>
                </div>
                <div class="down_list" style="display: none;">
                    <ul></ul>
                </div>
                <input type="button" name="" id="enter_game_ns" value="登錄" />
                <div class="select_title_ns">
                    <div class="dashed_line"></div>
                    <div class="handle_head_title">選擇登錄方式</div>
                </div>
                <ul class="handle_icon clearfix">
                    <li>
                        <div class="handle handle1">
                            <a class="fbLogin">
                                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/Facebook.png" />
                            </a>
                        </div>
                        <p class="handle_icon_facebook">facebook</p>
                    </li>
                    <li>
                        <div class="handle handle2">
                            <i class="iconfont icon-94"></i>
                        </div>
                        <p class="handle_icon_sw">試玩</p>
                    </li>
                    <li style="float: right;">
                        <div class="handle handle3">
                            <i class="iconfont icon-people"></i>
                        </div>
                        <p class="handle_icon_pt">平台登錄</p>
                    </li>
                </ul>
            </div>
        </div>
        <div class="login_inp">
            <div class="login_logo_inp">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="login_dl_ns">
                <div class="login_acnum_ns">
                    <i class="iconfont icon-people"></i>
                    <input type="text" id="login_username_ns" placeholder="賬號（郵箱/手機號碼）" class="login_username_ns" />
                    <label for="login_username_ns" class="clear_ns"><img
                            src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                </div>
                <div class="login_acnum_ns">
                    <i class="iconfont icon-shurumima"></i>
                    <input type="password" id="login_userpassword_ns" placeholder="密碼" class="login_username_ns" />
                    <label for="login_userpassword_ns" class="show_ns"><img
                            src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                </div>
                <div class="forget_password_ns">
                    <span class="">忘記密碼 ?</span>
                </div>
                <input type="button" value="登錄" class="login_button_ns" />
                <p class="p_span">
                    <span class="click_registered_ns">點我註冊賬號</span>
                    <span class="account_management_ns">賬號管理</span>
                </p>
            </div>
        </div>
        <div class="forget_password">
            <div class="login_logo_forget">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="forget_password_ns">
                <div class="login_acnum_ns">
                    <i class="iconfont icon-people"></i>
                    <input type="text" id="retrieve_username_ns" placeholder="賬號" class="login_username_ns" />
                    <label for="retrieve_username_ns" class="clear_ns"><img
                            src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                </div>
                <div class="login_acnum_ns">
                    <i class="iconfont icon-tubiao209"></i>
                    <input type="text" id="retrieve_email_ns" placeholder="註冊Email" class="login_username_ns" />
                    <label for="retrieve_email_ns" class="clear_ns"><img
                            src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                </div>
                <input type="button" value="找回密碼" class="retrieve_password_ns" />
            </div>
        </div>
        <div class="login_zc">
            <div class="login_logo_zc">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="login_zc_ns">
                <div class="login-sub">
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-people"></i>
                        <input type="text" id="registered_username_ns" placeholder="賬號：手機號/Email"
                            class="login_username_ns" />
                        <label for="registered_username_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="registered_userpassword_ns" placeholder="密碼"
                            class="login_username_ns" />
                        <label for="registered_userpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="registered_repeatpassword_ns" placeholder="重複密碼"
                            class="login_username_ns" />
                        <label for="registered_repeatpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-tubiao209"></i>
                        <input type="text" id="registered_email_ns" placeholder="Email(可用於找回密碼)"
                            class="login_username_ns" />
                        <label for="registered_email_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                </div>
                <div class="user_agree_ns">
                    <input type="radio" value="1" id="agree_ns" checked="checked" hidden="hidden" />
                    <label for="agree_ns" class="advice_nsw checked"></label>
                    <span class="user_agree_rule">同意會員服務</span>
                    <span class="toRule" style="color: aquamarine;">《會員管理規章》</span>
                </div>
                <input type="button" value="賬號註冊" class="registered_button_ns" />
            </div>
        </div>
        <div class="account_management">
            <div class="login_logo_account">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="login_way_ns">
                <div class="account1_ns">修改密碼</div>
                <div class="account2_ns">試玩綁定</div>
                <div class="account3_ns">Facebook賬號綁定</div>
            </div>
        </div>
        <div class="account_changePass">
            <div class="login_logo_changePass">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="account_changePass_ns">
                <div class="login-sub">
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-people"></i>
                        <input type="text" id="changePass_phone_ns" placeholder="賬號：手機號/Email"
                            class="login_username_ns" />
                        <label for="registered_username_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="text" id="changePass_userpassword_ns" placeholder="原始密碼"
                            class="login_username_ns" />
                        <label for="registered_userpassword_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="changePass_newpassword_ns" placeholder="新密碼"
                            class="login_username_ns" />
                        <label for="registered_repeatpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-tubiao209"></i>
                        <input type="password" id="changePass_repeatpassword_ns" placeholder="確認密碼"
                            class="login_username_ns" />
                        <label for="registered_email_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                </div>
                <input type="button" value="確認修改" class="changePass_button_ns" />
            </div>
        </div>
        <div class="account_play">
            <div class="login_logo_play">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="account_play_ns">
                <div class="login-sub">
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-people"></i>
                        <input type="text" id="play_username_ns" placeholder="賬號：手機號/Email" class="login_username_ns" />
                        <label for="registered_username_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="play_userpassword_ns" placeholder="密 碼" class="login_username_ns" />
                        <label for="registered_userpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="play_repeatpassword_ns" placeholder="重複密碼"
                            class="login_username_ns" />
                        <label for="registered_repeatpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-tubiao209"></i>
                        <input type="text" id="play_email_ns" placeholder="Email（可用於找回密碼）" class="login_username_ns" />
                        <label for="registered_email_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                </div>
                <input type="button" value="確認綁定" class="play_button_ns" />
            </div>
        </div>
        <div class="account_fb">
            <div class="login_logo_fb">
                <img src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/back.png" class="back_ns" />
            </div>
            <div class="account_fb_ns">
                <div class="login-sub">
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-people"></i>
                        <input type="text" id="fb_username_ns" placeholder="賬號：手機號/Email" class="login_username_ns" />
                        <label for="registered_username_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="fb_userpassword_ns" placeholder="密 碼" class="login_username_ns" />
                        <label for="registered_userpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-shurumima"></i>
                        <input type="password" id="fb_repeatpassword_ns" placeholder="重複密碼" class="login_username_ns" />
                        <label for="registered_repeatpassword_ns" class="show_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png" /></label>
                    </div>
                    <div class="login_acnum_ns">
                        <i class="iconfont icon-tubiao209"></i>
                        <input type="text" id="fb_email_ns" placeholder="Email（可用於找回密碼）" class="login_username_ns" />
                        <label for="registered_email_ns" class="clear_ns"><img
                                src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/close.png" /></label>
                    </div>
                </div>
                <input type="button" value="確認綁定" class="fb_button_ns" />
            </div>
        </div>

        <div class="quitLogion">
            <div class="login_Title">
                <span class="title_name"></span>
                <span class="title_loding">正在登錄</span>
            </div>
            <div class="quit_btn">切換賬號</div>
        </div>
        <div class="showad"></div>
        <div class="loading"></div>
    </div>
</body>
<script type="text/javascript" src="./css/jquery.min.js"></script>
<script>
    var gameCode_str = GetQueryString("gameCode");
    var packageVersion_str = GetQueryString("packageVersion");
    var siteCode_str = GetQueryString("siteCode");
    var isIPGame_str = GetQueryString("isIPGame");
    var packageName_str = GetQueryString("packageName");
    var language_str = GetQueryString("language");
    var os_str = GetQueryString("os");

    var fbLoginData = [];
    var ptLoginData = [];
    var tryLoginData = [];
    var ptData = {};
    var fbdata = {};
    var trydata = {};
    var sessionID;
    var isFirstLogin = 0;
    var isFbLogin = 0;
    var isClick = true;
    var ch;
    var sendData;
    var str;
    var getLanguage;
    var tryToGameData;

    var getfbLoginData_c = "fbLoginData";
    var getptLoginData_c = "ptLoginData";
    var gettryLoginData_c = "tryLoginData";

    var appid = "264880538101354";
    var redirect_url =
        "https://awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/index.html";

    //生成uuid
    function generateUUID() {
        var d = new Date().getTime();
        if (window.performance && typeof window.performance.now === "function") {
            d += performance.now(); //use high-precision timer if available
        }
        var uuid = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
            /[xy]/g,
            function (c) {
                var r = (d + Math.random() * 16) % 16 | 0;
                d = Math.floor(d / 16);
                return (c == "x" ? r : (r & 0x3) | 0x8).toString(16);
            }
        );
        return uuid;
    }

    //五秒后才能再次点击
    function afterClick() {
        setTimeout(function () {
            isClick = true;
        }, 5000);
    }

    //sort

    function compare(arr) {
        return function (m, n) {
            var a = m[arr];
            var b = n[arr];
            return a - b;
        };
    }

    function uncompare(arr) {
        return function (m, n) {
            var a = m[arr];
            var b = n[arr];
            return b - a;
        };
    }

    function _toConsumableArray(arr) {
        if (arr === null) {
            arr = []
        }
        if (Array.isArray(arr)) {
            for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
                arr2[i] = arr[i];
            }
            return arr2;
        } else {
            return Array.from(arr);
        }
    }

    //获取URL参数
    function GetQueryString(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\&$");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return "";
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    var getFbLoginData = JSON.parse(localStorage.getItem("fbLoginData"));
    var getPtLoginData = JSON.parse(localStorage.getItem("ptLoginData"));
    var getTryLoginData = JSON.parse(localStorage.getItem("tryLoginData"));
    var arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(getFbLoginData), _toConsumableArray(
        getTryLoginData));
    arrData.sort(compare("time"));
    console.log(arrData)
    if (arrData != undefined && arrData.length > 0) {
        console.log(arrData)
        var autoLogin = arrData[arrData.length - 1];
        $(".title_name").text(autoLogin.name);
        $(".quitLogion").show();
        $(".loading").show();
        $(".showad").show();

        var timer = setTimeout(function () {
            alert(Api.userFastLogin_api)
            switch (autoLogin.type) {
                case "pt":
                    $.ajax({
                        url: Api.userLogin_api,
                        type: "POST",
                        data: {
                            username: autoLogin.name,
                            password: autoLogin.password,
                            siteCode: "damoregame",
                            t: "1487665362664",
                            ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                            ismobile: "yes",
                            language: gamedata.language,
                            gameCode: gamedata.gameCode,
                            packageName: gamedata.packageName,
                        },
                        dataType: "jsonp",
                        beforeSend: function beforeSend(e) {
                            $(".loading").show();
                            $(".showad").show();
                        },
                        success: function success(res) {
                            $(".loading").hide();
                            $(".showad").hide();
                            $(".quitLogion").hide();
                            if (res.code === "1000") {
                                //成功
                                sessionID = res.sessionID;
                                $.ajax({
                                    type: "POST",
                                    url: Api.userMobileAuth_api,
                                    data: {
                                        sitecode: gamedata.siteCode,
                                        type: res.type,
                                        os: gamedata.os,
                                        SessionID_LP: res.sessionID,
                                        language: gamedata.language,
                                        gameCode: gamedata.gameCode,
                                        packageName: gamedata.packageName,
                                        packageVersion: gamedata.packageVersion,
                                    },
                                    dataType: "jsonp",
                                    success: function success(res) {
                                        $(".quitLogion").hide();
                                        $(".loading").hide();
                                        $(".showad").hide();
                                        sendData = JSON.stringify(res);
                                        loginCallback(sendData);
                                    },
                                });
                            } else {
                                alert(res.msg);
                            }
                        },
                    });
                    break;
                case "fb":
                    var getGameData = JSON.parse(localStorage.getItem("gameData"));
                    console.log(getGameData);
                    $.ajax({
                        url: Api.fbuserLoginForMobile_api,
                        type: "POST",
                        data: {
                            access_token: autoLogin.accessToken,
                            language: getGameData.language,
                            gameCode: getGameData.gameCode,
                            packageName: getGameData.packageName,
                            os: getGameData.os,
                            appid: appid,
                            tag: "website",
                        },
                        dataType: "jsonp",
                        beforeSend: function beforeSend(e) {
                            $(".loading").show();
                            $(".showad").show();
                        },
                        success: function success(data) {
                            $(".loading").hide();
                            $(".showad").hide();
                            $(".quitLogion").hide();
                            if (data.code == "6004") {
                                $.ajax({
                                    url: Api.userPartnerLogin_api,
                                    type: "POST",
                                    data: {
                                        siteUsername: data.siteUsername,
                                        sitecode: data.sitecode,
                                        password: data.password,
                                        time: data.time,
                                        email: data.email,
                                        fbname: data.fbname,
                                        language: getGameData.language,
                                        gameCode: getGameData.gameCode,
                                        packageName: getGameData.packageName,
                                        os: getGameData.os,
                                    },
                                    dataType: "jsonp",
                                    jsonp: "callback",
                                    success: function success(res) {
                                        if (res.code == "1400") {
                                            sessionID = res.sessionID;
                                            $.ajax({
                                                type: "POST",
                                                url: Api.userMobileAuth_api,
                                                data: {
                                                    sitecode: getGameData
                                                        .siteCode,
                                                    type: res.type,
                                                    os: getGameData.os,
                                                    SessionID_LP: res.sessionID,
                                                    language: getGameData
                                                        .language,
                                                    gameCode: getGameData
                                                        .gameCode,
                                                    packageName: getGameData
                                                        .packageName,
                                                    packageVersion: packageVersion_str,
                                                },
                                                dataType: "jsonp",
                                                success: function success(res) {
                                                    console.log(res);
                                                    sendData = JSON
                                                        .stringify(res);
                                                    loginCallback(sendData);
                                                },
                                            });
                                        } else {
                                            alert(res.msg);
                                        }
                                    },
                                    error: function error() {},
                                });
                            } else {
                                alert(data.msg);
                            }
                        },
                        error: function error() {},
                    });
                    break;
                case "player":
                    $.ajax({
                        type: "POST",
                        url: Api.userFastLogin_api,
                        data: {
                            isFirst: "no",
                            id: autoLogin.id,
                            siteCode: autoLogin.siteCode,
                            t: autoLogin.t,
                            ps: autoLogin.ps,
                            imeiNum: generateUUID(),
                            xuhaoNum: generateUUID(),
                            language: gamedata.language,
                            gameCode: gamedata.gameCode,
                            packageName: gamedata.packageName,
                            os: gamedata.os,
                        },
                        dataType: "jsonp",
                        beforeSend: function beforeSend(e) {
                            $(".loading").show();
                            $(".showad").show();

                        },
                        success: function success(res) {
                            console.log(res);
                            $(".loading").hide();
                            $(".showad").hide();
                            $(".quitLogion").hide();

                            if (res.code === "1400") {
                                sessionID = res.sessionID;
                                $.ajax({
                                    type: "POST",
                                    url: Api.userMobileAuth_api,
                                    data: {
                                        sitecode: gamedata.siteCode,
                                        type: res.type,
                                        os: gamedata.os,
                                        SessionID_LP: res.sessionID,
                                        language: gamedata.language,
                                        gameCode: gamedata.gameCode,
                                        packageName: gamedata.packageName,
                                        packageVersion: gamedata.packageVersion,
                                    },
                                    dataType: "jsonp",
                                    success: function success(res) {
                                        console.log(res);
                                        sendData = JSON.stringify(res);
                                        loginCallback(sendData);
                                    },
                                });
                            }
                        },
                        error: function error(err) {
                            console.log(err);
                        },
                    });
                    break;
            }
        }, 5000);
    }

    $(".quit_btn").click(function () {
        $(".quitLogion").hide();
        $(".loading").hide();
        $(".showad").hide();
        clearTimeout(timer);
    });

    var getDataForPt = JSON.parse(localStorage.getItem(getptLoginData_c));

    if (getDataForPt != null) {
        ptLoginData = getDataForPt;
    }

    var getfbLoginData = JSON.parse(localStorage.getItem(getfbLoginData_c));
    if (getfbLoginData === null) {
        localStorage.setItem(getfbLoginData_c, "[]");
    }
    var getptLoginData = JSON.parse(localStorage.getItem(getptLoginData_c));
    if (getptLoginData === null) {
        localStorage.setItem(getptLoginData_c, "[]");
    }
    var gettryLoginData = JSON.parse(localStorage.getItem(gettryLoginData_c));
    if (gettryLoginData === null) {
        localStorage.setItem(gettryLoginData_c, "[]");
    }

    if (GetQueryString("gameCode")) {
        console.log("==>");
        var gameData = {
            gameCode: gameCode_str,
            siteCode: siteCode_str,
            isIPGame: isIPGame_str,
            packageName: packageName_str,
            language: language_str,
            os: os_str,
            packageVersion: packageVersion_str,
        };
        console.log(gameData);
        var Data = JSON.stringify(gameData);
        localStorage.setItem("gameData", JSON.stringify(gameData));
    }

    function login_mobile() {
        var username = $("#login_username_ns").val();
        var password = $("#login_userpassword_ns").val();

        username = formatting.StrTrim(username);
        username = formatting.filterHTML(username);
        password = formatting.StrTrim(password);

        if (formatting.isEmptyString(username)) {
            alert("賬號或密碼不能為空");;
            return;
        }
        if (formatting.isEmptyString(password)) {
            alert("賬號或密碼不能為空");;
            return;
        }
        if (
            !formatting.isNumAndChar(username) ||
            username.length < 3 ||
            username.length > 32
        ) {
            alert("賬號只能是3-32位數字或字母（區分大小寫）開頭+數字字母的郵箱，\n及3-32位數字組成的手機號");
            return;
        }
        if (password.length < 6 || password.length > 20) {
            alert("請輸入6-20位數字或字母組成的密碼");
            return;
        }

        $.ajax({
            url: Api.userLogin_api,
            type: "POST",
            data: {
                username: username,
                password: password,
                siteCode: "damoregame",
                t: "1487665362664",
                ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                ismobile: "yes",
                language: language_str,
                gameCode: gameCode_str,
                packageName: packageName_str,
            },
            dataType: "jsonp",
            beforeSend: function beforeSend(e) {
                isClick = false;
                $(".loading").show();
                $(".showad").show();
            },
            success: function success(res) {
                afterClick();
                $(".loading").hide();
                $(".showad").hide();
                if (res.code === "1000") {
                    var time = new Date().getTime();
                    ptData = {
                        name: username,
                        password: password,
                        typename: "회원 로그인",
                        type: "pt",
                        icon: "icon-people",
                        time: time,
                    };

                    if (!(Array.isArray(ptLoginData) && ptLoginData.length === 0)) {
                        ptLoginData.forEach(function (item, index) {
                            ptLoginData.push(ptData);

                            var obj = {};
                            ptLoginData = ptLoginData.reduce(function (item, next) {
                                obj[next.name] ?
                                    "" :
                                    (obj[next.name] = true && item.push(next));
                                return item;
                            }, []);
                            console.log(ptLoginData);
                        });
                    } else {
                        ptLoginData.push(ptData);
                    }

                    localStorage.setItem(
                        getptLoginData_c,
                        JSON.stringify(ptLoginData) || "[]"
                    );

                    //成功
                    sessionID = res.sessionID;
                    $.ajax({
                        type: "POST",
                        url: Api.userMobileAuth_api,
                        data: {
                            sitecode: siteCode_str,
                            type: res.type,
                            os: os_str,
                            SessionID_LP: res.sessionID,
                            language: language_str,
                            gameCode: gameCode_str,
                            packageName: packageName_str,
                            packageVersion: packageVersion_str,
                        },
                        dataType: "jsonp",
                        beforeSend: function beforeSend(e) {
                            $(".loading").show();
                            $(".showad").show();
                        },
                        success: function success(res) {
                            $(".loading").hide();
                            $(".showad").hide();
                            console.log(res);
                            sendData = JSON.stringify(res);
                            loginCallback(sendData);
                        },
                    });
                } else {
                    alert(res.msg);
                }
            },
        });
    }

    $(".login_button_ns").click(function () {
        var username = $("#login_username_ns").val();
        var password = $("#login_userpassword_ns").val();

        username = formatting.StrTrim(username);
        username = formatting.filterHTML(username);
        password = formatting.StrTrim(password);

        if (formatting.isEmptyString(username)) {
            alert("賬號或密碼不能為空");;
            return;
        }
        if (formatting.isEmptyString(password)) {
            alert("賬號或密碼不能為空");;
            return;
        }
        if (
            !formatting.isNumAndChar(username) ||
            username.length < 3 ||
            username.length > 32
        ) {
            alert("賬號只能是3-32位數字或字母（區分大小寫）開頭+數字字母的郵箱，\n及3-32位數字組成的手機號");
            return;
        }
        if (password.length < 6 || password.length > 20) {
            alert("請輸入6-20位數字或字母組成的密碼");
            return;
        }

        $.ajax({
            url: Api.userLogin_api,
            type: "POST",
            data: {
                username: username,
                password: password,
                siteCode: "damoregame",
                t: "1487665362664",
                ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                ismobile: "yes",
                language: language_str,
                gameCode: gameCode_str,
                packageName: packageName_str,
            },
            dataType: "jsonp",
            beforeSend: function beforeSend(e) {
                isClick = false;
                $(".loading").show();
                $(".showad").show();
            },
            success: function success(res) {
                afterClick();
                $(".loading").hide();
                $(".showad").hide();
                if (res.code === "1000") {
                    var time = new Date().getTime();
                    ptData = {
                        name: username,
                        password: password,
                        typename: "회원 로그인",
                        type: "pt",
                        icon: "icon-people",
                        time: time,
                    };

                    if (!(Array.isArray(ptLoginData) && ptLoginData.length === 0)) {
                        ptLoginData.forEach(function (item, index) {
                            ptLoginData.push(ptData);

                            var obj = {};
                            ptLoginData = ptLoginData.reduce(function (item, next) {
                                obj[next.name] ?
                                    "" :
                                    (obj[next.name] = true && item.push(next));
                                return item;
                            }, []);
                            console.log(ptLoginData);
                        });
                    } else {
                        ptLoginData.push(ptData);
                    }

                    localStorage.setItem(
                        getptLoginData_c,
                        JSON.stringify(ptLoginData) || "[]"
                    );

                    //成功
                    sessionID = res.sessionID;
                    $.ajax({
                        type: "POST",
                        url: Api.userMobileAuth_api,
                        data: {
                            sitecode: siteCode_str,
                            type: res.type,
                            os: os_str,
                            SessionID_LP: res.sessionID,
                            language: language_str,
                            gameCode: gameCode_str,
                            packageName: packageName_str,
                            packageVersion: packageVersion_str,
                        },
                        dataType: "jsonp",
                        beforeSend: function beforeSend(e) {
                            $(".loading").show();
                            $(".showad").show();
                        },
                        success: function success(res) {
                            $(".loading").hide();
                            $(".showad").hide();
                            console.log(res);
                            sendData = JSON.stringify(res);
                            loginCallback(sendData);
                        },
                    });
                } else {
                    alert(res.msg);
                }
            },
        });
    });

    $(".retrieve_password_ns").click(function () {
        var username = $("#retrieve_username_ns").val();
        var email = $("#retrieve_email_ns").val();

        username = formatting.StrTrim(username);
        username = formatting.filterHTML(username);

        if (formatting.isEmail(email)) {
            alert("您輸入的郵箱格式不正確");
            return;
        }

        if (username && email) {
            $.ajax({
                type: "POST",
                url: Api.getPasswdStep1_api,
                data: {
                    username: username,
                    email: email,
                    isIPGame: isIPGame_str,
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    $(".loading").hide();
                    $(".showad").hide();
                    afterClick();
                    console.log(res);
                    if (res.code === "1020") {
                        alert(res.msg);
                    } else {
                        alert(res.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    });

    $(".registered_button_ns").click(function () {
        var registered_username = $("#registered_username_ns").val();
        var registered_userpassword = $("#registered_userpassword_ns").val();
        var registered_repeatpassword = $("#registered_repeatpassword_ns").val();
        var registered_email = $("#registered_email_ns").val();

        console.log(
            registered_username,
            registered_userpassword,
            registered_repeatpassword,
            registered_email
        );

        if (
            registered_username &&
            registered_userpassword &&
            registered_repeatpassword &&
            registered_email
        ) {
            $.ajax({
                type: "POST",
                url: Api.userRegister_api,
                data: {
                    username: registered_username,
                    password: registered_userpassword,
                    repassword: registered_repeatpassword,
                    email: registered_email,
                    os: os_str,
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    afterClick();
                    $(".loading").hide();
                    $(".showad").hide();
                    console.log(res);
                    if (res.code === "1100") {
                        var timer = new Date().getTime();
                        ptData = {
                            name: registered_username,
                            password: registered_userpassword,
                            typename: "회원 로그인",
                            type: "pt",
                            icon: "icon-people",
                            time: timer,
                        };
                        ptLoginData.push(ptData);
                        localStorage.setItem(
                            getptLoginData_c,
                            JSON.stringify(ptLoginData)
                        );

                        $.ajax({
                            type: "POST",
                            url: Api.userMobileAuth_api,
                            data: {
                                sitecode: siteCode_str,
                                type: res.type,
                                os: os_str,
                                SessionID_LP: res.sessionID,
                                language: language_str,
                                gameCode: gameCode_str,
                                packageName: packageName_str,
                                packageVersion: packageVersion_str,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".showad").show();
                                $(".loading").show();
                            },
                            success: function success(res) {
                                $(".showad").hide();
                                $(".loading").hide();
                                console.log(res);
                                sendData = JSON.stringify(res);
                                loginCallback(sendData);
                            },
                        });
                    } else {
                        alert(res.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    });

    $(".changePass_button_ns").click(function () {
        var changePass_phone = $("#changePass_phone_ns").val();
        var changePass_userpassword = $("#changePass_userpassword_ns").val();
        var changePass_newpassword = $("#changePass_newpassword_ns").val();
        var changePass_repeatpassword = $("#changePass_repeatpassword_ns").val();

        console.log(
            changePass_phone,
            changePass_userpassword,
            changePass_newpassword,
            changePass_repeatpassword
        );

        if (
            changePass_phone &&
            changePass_userpassword &&
            changePass_newpassword &&
            changePass_repeatpassword
        ) {
            $.ajax({
                type: "POST",
                url: Api.userChangePassword_api,
                data: {
                    password: changePass_userpassword,
                    newpassword: changePass_newpassword,
                    renewpassword: changePass_repeatpassword,
                    username: changePass_phone,
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    $(".loading").show();
                    $(".showad").show();
                    isClick = false;
                },
                success: function success(res) {
                    $(".loading").show();
                    $(".showad").show();
                    afterClick();
                    console.log(res);
                    if (res.code === "1009") {
                        alert(res.msg);
                    } else {
                        alert(res.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    });

    $(".fb_button_ns").click(function () {
        var fb_phone = $("#fb_username_ns").val();
        var fb_userpassword = $("#fb_userpassword_ns").val();
        var fb_repeatpassword = $("#fb_repeatpassword_ns").val();
        var fb_email = $("#fb_email_ns").val();

        var getGameData = JSON.parse(localStorage.getItem("gameData"));
        var getfbData = JSON.parse(localStorage.getItem(getfbLoginData_c));
        console.log(getfbData);

        if (fb_phone && fb_userpassword && fb_repeatpassword && fb_email) {
            $.ajax({
                url: Api.fbuserLoginForMobile_api,
                type: "POST",
                data: {
                    access_token: getfbData[0].accessToken,
                    language: getGameData.language,
                    gameCode: getGameData.gameCode,
                    packageName: getGameData.packageName,
                    os: getGameData.os,
                    appid: appid,
                    tag: "website",
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(data) {
                    afterClick();
                    $(".loading").hide();
                    $(".showad").hide();
                    if (data.code == "6004") {
                        $.ajax({
                            url: Api.userPartnerLogin_api,
                            type: "POST",
                            data: {
                                siteUsername: data.siteUsername,
                                sitecode: data.sitecode,
                                password: data.password,
                                time: data.time,
                                email: data.email,
                                fbname: data.fbname,
                                language: getGameData.language,
                                gameCode: getGameData.gameCode,
                                packageName: getGameData.packageName,
                                os: getGameData.os,
                            },
                            dataType: "jsonp",
                            jsonp: "callback",
                            success: function success(res) {
                                if (res.code == "1400") {
                                    sessionID = res.sessionID;
                                    $.ajax({
                                        type: "POST",
                                        url: Api.userUpgradeAccount_api,
                                        data: {
                                            username: fb_phone,
                                            password: fb_userpassword,
                                            repassword: fb_repeatpassword,
                                            email: fb_email,
                                            SessionID_LP: sessionID,
                                            language: getGameData.language,
                                            gameCode: getGameData.gameCode,
                                            packageName: getGameData.packageName,
                                            os: getGameData.os,
                                        },
                                        dataType: "jsonp",
                                        beforeSend: function beforeSend(e) {
                                            $(".loading").show();
                                            $(".showad").show();
                                            isClick = false;
                                        },
                                        success: function success(res) {
                                            $(".loading").hide();
                                            $(".showad").hide();
                                            afterClick();
                                            console.log(res);
                                            if (res.code === "1110") {
                                                $.ajax({
                                                    url: Api.userLogin_api,
                                                    type: "POST",
                                                    data: {
                                                        username: fb_phone,
                                                        password: fb_userpassword,
                                                        siteCode: "damoregame",
                                                        t: "1487665362664",
                                                        ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                                                        ismobile: "yes",
                                                        language: language_str,
                                                        gameCode: gameCode_str,
                                                        packageName: packageName_str,
                                                    },
                                                    dataType: "jsonp",
                                                    beforeSend: function beforeSend(
                                                        e) {
                                                        $(".loading")
                                                            .show();
                                                        $(".showad")
                                                            .show();
                                                    },
                                                    success: function success(
                                                        res) {
                                                        $(".loading")
                                                            .hide();
                                                        $(".showad")
                                                            .hide();
                                                        if (res.code ===
                                                            "1000") {
                                                            //成功
                                                            sessionID =
                                                                res
                                                                .sessionID;
                                                            $.ajax({
                                                                type: "POST",
                                                                url: Api
                                                                    .userMobileAuth_api,
                                                                data: {
                                                                    sitecode: siteCode_str,
                                                                    type: res
                                                                        .type,
                                                                    os: os_str,
                                                                    SessionID_LP: res
                                                                        .sessionID,
                                                                    language: language_str,
                                                                    gameCode: gameCode_str,
                                                                    packageName: packageName_str,
                                                                    packageVersion: packageVersion_str,
                                                                },
                                                                dataType: "jsonp",
                                                                beforeSend: function beforeSend(
                                                                    e
                                                                ) {
                                                                    $(".loading")
                                                                        .show();
                                                                    $(".showad")
                                                                        .show();
                                                                },
                                                                success: function success(
                                                                    res
                                                                ) {
                                                                    $(".loading")
                                                                        .hide();
                                                                    $(".showad")
                                                                        .hide();
                                                                    console
                                                                        .log(
                                                                            res
                                                                        );
                                                                    sendData
                                                                        =
                                                                        JSON
                                                                        .stringify(
                                                                            res
                                                                        );
                                                                    loginCallback
                                                                        (
                                                                            sendData
                                                                        );
                                                                },
                                                            });
                                                        } else {
                                                            alert(res
                                                                .msg
                                                            );
                                                        }
                                                    },
                                                });
                                            } else {
                                                alert(res.msg);
                                            }
                                        },
                                    });
                                } else {
                                    alert(res.msg);
                                }
                            },
                        });
                    } else {
                        alert(data.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    });

    $(".play_button_ns").click(function () {
        var play_phone = $("#play_username_ns").val();
        var play_userpassword = $("#play_userpassword_ns").val();
        var play_repeatpassword = $("#play_repeatpassword_ns").val();
        var play_email = $("#play_email_ns").val();

        var getGameData = JSON.parse(localStorage.getItem("gameData"));
        var tryToGameData = JSON.parse(localStorage.getItem("tryToGameData"));

        if (
            play_phone &&
            play_userpassword &&
            play_repeatpassword &&
            play_email
        ) {
            $.ajax({
                type: "POST",
                url: Api.userFastLogin_api,
                data: {
                    isFirst: "no",
                    id: tryToGameData.id,
                    siteCode: tryToGameData.siteCode,
                    t: tryToGameData.t,
                    ps: tryToGameData.ps,
                    imeiNum: generateUUID(),
                    xuhaoNum: generateUUID(),
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    $(".loading").show();
                    $(".showad").show();
                    isClick = false;
                },
                success: function success(res) {
                    console.log(res);
                    $(".loading").hide();
                    $(".showad").hide();
                    afterClick();
                    if (res.code === "1400") {
                        tryToGameData = {
                            id: res.id,
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                        };
                        console.log(tryToGameData);
                        sessionID = res.sessionID;

                        localStorage.setItem(
                            "tryToGameData",
                            JSON.stringify(tryToGameData)
                        );
                        $.ajax({
                            type: "POST",
                            url: Api.userUpgradeAccount_api,
                            data: {
                                username: play_phone,
                                password: play_userpassword,
                                repassword: play_repeatpassword,
                                email: play_email,
                                SessionID_LP: sessionID,
                                language: getGameData.language,
                                gameCode: getGameData.gameCode,
                                packageName: getGameData.packageName,
                                os: getGameData.os,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                            },
                            success: function success(data) {
                                $(".loading").hide();
                                $(".showad").hide();
                                console.log(data);
                                if (data.code === "1110") {
                                    trydata = {
                                        name: play_phone,
                                        type: "player",
                                        icon: "icon-94",
                                        siteCode: res.siteCode,
                                        t: res.t,
                                        ps: res.ps,
                                        id: res.id,
                                        typename: "Player",
                                    };
                                    tryLoginData = [];
                                    tryLoginData.push(trydata);
                                    localStorage.setItem(
                                        gettryLoginData_c,
                                        JSON.stringify(tryLoginData)
                                    );

                                    $.ajax({
                                        url: Api.userLogin_api,
                                        type: "POST",
                                        data: {
                                            username: play_phone,
                                            password: play_userpassword,
                                            siteCode: "damoregame",
                                            t: "1487665362664",
                                            ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                                            ismobile: "yes",
                                            language: language_str,
                                            gameCode: gameCode_str,
                                            packageName: packageName_str,
                                        },
                                        dataType: "jsonp",
                                        beforeSend: function beforeSend(e) {
                                            $(".loading").show();
                                            $(".showad").show();
                                        },
                                        success: function success(res) {
                                            $(".loading").hide();
                                            $(".showad").hide();
                                            if (res.code === "1000") {
                                                //成功
                                                sessionID = res.sessionID;
                                                $.ajax({
                                                    type: "POST",
                                                    url: Api
                                                        .userMobileAuth_api,
                                                    data: {
                                                        sitecode: siteCode_str,
                                                        type: res.type,
                                                        os: os_str,
                                                        SessionID_LP: res
                                                            .sessionID,
                                                        language: language_str,
                                                        gameCode: gameCode_str,
                                                        packageName: packageName_str,
                                                        packageVersion: packageVersion_str,
                                                    },
                                                    dataType: "jsonp",
                                                    beforeSend: function beforeSend(
                                                        e) {
                                                        $(".loading")
                                                            .show();
                                                        $(".showad")
                                                            .show();
                                                    },
                                                    success: function success(
                                                        res) {
                                                        $(".loading")
                                                            .hide();
                                                        $(".showad")
                                                            .hide();
                                                        console.log(
                                                            res);
                                                        sendData = JSON
                                                            .stringify(
                                                                res);
                                                        loginCallback(
                                                            sendData
                                                        );
                                                    },
                                                });
                                            } else {
                                                alert(res.msg);
                                            }
                                        },
                                    });
                                } else {
                                    alert(data.msg);
                                }
                            },
                        });
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    });

    $(".handle2").click(function () {
        isFirstLogin = localStorage.getItem("FirstLogin");
        console.log(isFirstLogin);
        console.log(isClick);

        if (isFirstLogin === null) {
            console.log("--------->翠花");

            $.ajax({
                type: "POST",
                url: Api.userFastLogin_api,
                data: {
                    isFirst: "yes",
                    imeiNum: generateUUID(),
                    xuhaoNum: generateUUID(),
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    console.log(isClick);
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    afterClick();
                    $(".loading").hide();
                    $(".showad").hide();
                    console.log(res);

                    if (res.code === "1400") {
                        var tryToGameData = {
                            id: res.id,
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                        };
                        sessionID = res.sessionID;

                        localStorage.setItem(
                            "tryToGameData",
                            JSON.stringify(tryToGameData)
                        );
                        isFirstLogin = 1;
                        localStorage.setItem("FirstLogin", isFirstLogin);
                        var time = new Date().getTime();
                        trydata = {
                            name: res.id,
                            id: res.id,
                            type: "player",
                            icon: "icon-94",
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                            typename: "Player",
                            time: time,
                        };

                        tryLoginData.push(trydata);
                        localStorage.setItem(
                            gettryLoginData_c,
                            JSON.stringify(tryLoginData) || "[]"
                        );

                        $.ajax({
                            type: "POST",
                            url: Api.userMobileAuth_api,
                            data: {
                                sitecode: siteCode_str,
                                type: res.type,
                                os: os_str,
                                SessionID_LP: res.sessionID,
                                language: language_str,
                                gameCode: gameCode_str,
                                packageName: packageName_str,
                                packageVersion: packageVersion_str,
                            },
                            dataType: "jsonp",
                            success: function success(res) {
                                console.log(res);
                                sendData = JSON.stringify(res);
                                loginCallback(sendData);
                            },
                        });
                    }
                },
            });
        } else if (isFirstLogin != null && isFirstLogin > 0) {
            tryToGameData = JSON.parse(localStorage.getItem("tryToGameData"));
            alert(tryToGameData)
            console.log(tryToGameData);
            $.ajax({
                type: "POST",
                url: Api.userFastLogin_api,
                data: {
                    isFirst: "no",
                    id: tryToGameData.id,
                    siteCode: tryToGameData.siteCode,
                    t: tryToGameData.t,
                    ps: tryToGameData.ps,
                    imeiNum: generateUUID(),
                    xuhaoNum: generateUUID(),
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    console.log(isClick);
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    console.log(res);
                    $(".loading").hide();
                    $(".showad").hide();
                    afterClick();
                    console.log(isClick);
                    if (res.code === "1400") {
                        tryToGameData = {
                            id: res.id,
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                        };
                        sessionID = res.sessionID;

                        localStorage.setItem(
                            "tryToGameData",
                            JSON.stringify(tryToGameData)
                        );
                        $.ajax({
                            type: "POST",
                            url: Api.userMobileAuth_api,
                            data: {
                                sitecode: siteCode_str,
                                type: res.type,
                                os: os_str,
                                SessionID_LP: res.sessionID,
                                language: language_str,
                                gameCode: gameCode_str,
                                packageName: packageName_str,
                                packageVersion: packageVersion_str,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                            },
                            success: function success(res) {
                                $(".loading").hide();
                                $(".showad").hide();
                                console.log(res);
                                sendData = JSON.stringify(res);
                                loginCallback(sendData);
                            },
                        });
                    }
                },
            });
        }
    });

    $(".fbLogin").click(function () {
        isFbLogin = localStorage.getItem("FbLogin");
        if (isFbLogin === null) {
            window.location.replace(
                "https://www.facebook.com/v5.0/dialog/oauth?client_id=" +
                appid +
                "&redirect_uri=" +
                redirect_url +
                "&state=10fc2285672a76a9d2d369c35d252dbf&scope=public_profile"
            );
        } else if (isFbLogin != null && isFbLogin > 0) {
            var getFbLoginData = JSON.parse(
                localStorage.getItem(getfbLoginData_c)
            );
            getLogin(getFbLoginData[0].accessToken);
        }
    });

    function forgetPassWord() {
        var username = $("#retrieve_username_ns").val();
        var email = $("#retrieve_email_ns").val();

        username = formatting.StrTrim(username);
        username = formatting.filterHTML(username);

        if (formatting.isEmail(email)) {
            alert("您輸入的郵箱格式不正確");
            return;
        }

        if (username && email) {
            $.ajax({
                type: "POST",
                url: Api.getPasswdStep1_api,
                data: {
                    username: username,
                    email: email,
                    isIPGame: isIPGame_str,
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    $(".loading").hide();
                    $(".showad").hide();
                    afterClick();
                    console.log(res);
                    if (res.code === "1020") {
                        alert(res.msg);
                    } else {
                        alert(res.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    }

    function userRegister() {
        var registered_username = $("#registered_username_ns").val();
        var registered_userpassword = $("#registered_userpassword_ns").val();
        var registered_repeatpassword = $("#registered_repeatpassword_ns").val();
        var registered_email = $("#registered_email_ns").val();

        console.log(
            registered_username,
            registered_userpassword,
            registered_repeatpassword,
            registered_email
        );

        if (
            registered_username &&
            registered_userpassword &&
            registered_repeatpassword &&
            registered_email
        ) {
            $.ajax({
                type: "POST",
                url: Api.userRegister_api,
                data: {
                    username: registered_username,
                    password: registered_userpassword,
                    repassword: registered_repeatpassword,
                    email: registered_email,
                    os: os_str,
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    afterClick();
                    $(".loading").hide();
                    $(".showad").hide();
                    console.log(res);
                    if (res.code === "1100") {
                        var timer = new Date().getTime();
                        ptData = {
                            name: registered_username,
                            password: registered_userpassword,
                            typename: "회원 로그인",
                            type: "pt",
                            icon: "icon-people",
                            time: timer,
                        };
                        ptLoginData.push(ptData);
                        localStorage.setItem(
                            getptLoginData_c,
                            JSON.stringify(ptLoginData)
                        );

                        $.ajax({
                            type: "POST",
                            url: Api.userMobileAuth_api,
                            data: {
                                sitecode: siteCode_str,
                                type: res.type,
                                os: os_str,
                                SessionID_LP: res.sessionID,
                                language: language_str,
                                gameCode: gameCode_str,
                                packageName: packageName_str,
                                packageVersion: packageVersion_str,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".showad").show();
                                $(".loading").show();
                            },
                            success: function success(res) {
                                $(".showad").hide();
                                $(".loading").hide();
                                console.log(res);
                                sendData = JSON.stringify(res);
                                loginCallback(sendData);
                            },
                        });
                    } else {
                        alert(res.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    }

    function userTryToGame() {
        isFirstLogin = localStorage.getItem("FirstLogin");
        console.log(isFirstLogin);
        console.log(isClick);

        if (isFirstLogin === null) {
            console.log("--------->翠花");

            $.ajax({
                type: "POST",
                url: Api.userFastLogin_api,
                data: {
                    isFirst: "yes",
                    imeiNum: generateUUID(),
                    xuhaoNum: generateUUID(),
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    console.log(isClick);
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    afterClick();
                    $(".loading").hide();
                    $(".showad").hide();
                    console.log(res);

                    if (res.code === "1400") {
                        var tryToGameData = {
                            id: res.id,
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                        };
                        sessionID = res.sessionID;

                        localStorage.setItem(
                            "tryToGameData",
                            JSON.stringify(tryToGameData)
                        );
                        isFirstLogin = 1;
                        localStorage.setItem("FirstLogin", isFirstLogin);
                        var time = new Date().getTime();
                        trydata = {
                            name: res.id,
                            id: res.id,
                            type: "player",
                            icon: "icon-94",
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                            typename: "Player",
                            time: time,
                        };

                        tryLoginData.push(trydata);
                        localStorage.setItem(
                            gettryLoginData_c,
                            JSON.stringify(tryLoginData) || "[]"
                        );

                        $.ajax({
                            type: "POST",
                            url: Api.userMobileAuth_api,
                            data: {
                                sitecode: siteCode_str,
                                type: res.type,
                                os: os_str,
                                SessionID_LP: res.sessionID,
                                language: language_str,
                                gameCode: gameCode_str,
                                packageName: packageName_str,
                                packageVersion: packageVersion_str,
                            },
                            dataType: "jsonp",
                            success: function success(res) {
                                console.log(res);
                                sendData = JSON.stringify(res);
                                loginCallback(sendData);
                            },
                        });
                    }
                },
            });
        } else if (isFirstLogin != null && isFirstLogin > 0) {
            tryToGameData = JSON.parse(localStorage.getItem("tryToGameData"));
            alert(tryToGameData)
            console.log(tryToGameData);
            $.ajax({
                type: "POST",
                url: Api.userFastLogin_api,
                data: {
                    isFirst: "no",
                    id: tryToGameData.id,
                    siteCode: tryToGameData.siteCode,
                    t: tryToGameData.t,
                    ps: tryToGameData.ps,
                    imeiNum: generateUUID(),
                    xuhaoNum: generateUUID(),
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    console.log(isClick);
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(res) {
                    console.log(res);
                    $(".loading").hide();
                    $(".showad").hide();
                    afterClick();
                    console.log(isClick);
                    if (res.code === "1400") {
                        tryToGameData = {
                            id: res.id,
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                        };
                        sessionID = res.sessionID;

                        localStorage.setItem(
                            "tryToGameData",
                            JSON.stringify(tryToGameData)
                        );
                        $.ajax({
                            type: "POST",
                            url: Api.userMobileAuth_api,
                            data: {
                                sitecode: siteCode_str,
                                type: res.type,
                                os: os_str,
                                SessionID_LP: res.sessionID,
                                language: language_str,
                                gameCode: gameCode_str,
                                packageName: packageName_str,
                                packageVersion: packageVersion_str,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                            },
                            success: function success(res) {
                                $(".loading").hide();
                                $(".showad").hide();
                                console.log(res);
                                sendData = JSON.stringify(res);
                                loginCallback(sendData);
                            },
                        });
                    }
                },
            });
        }
    }

    function userChangePassword() {
        var changePass_phone = $("#changePass_phone_ns").val();
        var changePass_userpassword = $("#changePass_userpassword_ns").val();
        var changePass_newpassword = $("#changePass_newpassword_ns").val();
        var changePass_repeatpassword = $("#changePass_repeatpassword_ns").val();

        console.log(
            changePass_phone,
            changePass_userpassword,
            changePass_newpassword,
            changePass_repeatpassword
        );

        if (
            changePass_phone &&
            changePass_userpassword &&
            changePass_newpassword &&
            changePass_repeatpassword
        ) {
            $.ajax({
                type: "POST",
                url: Api.userChangePassword_api,
                data: {
                    password: changePass_userpassword,
                    newpassword: changePass_newpassword,
                    renewpassword: changePass_repeatpassword,
                    username: changePass_phone,
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    $(".loading").show();
                    $(".showad").show();
                    isClick = false;
                },
                success: function success(res) {
                    $(".loading").show();
                    $(".showad").show();
                    afterClick();
                    console.log(res);
                    if (res.code === "1009") {
                        alert(res.msg);
                    } else {
                        alert(res.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    }

    function userUpgradeAccount() {
        var fb_phone = $("#fb_username_ns").val();
        var fb_userpassword = $("#fb_userpassword_ns").val();
        var fb_repeatpassword = $("#fb_repeatpassword_ns").val();
        var fb_email = $("#fb_email_ns").val();

        var getGameData = JSON.parse(localStorage.getItem("gameData"));
        var getfbData = JSON.parse(localStorage.getItem(getfbLoginData_c));
        console.log(getfbData);

        if (fb_phone && fb_userpassword && fb_repeatpassword && fb_email) {
            $.ajax({
                url: Api.fbuserLoginForMobile_api,
                type: "POST",
                data: {
                    access_token: getfbData[0].accessToken,
                    language: getGameData.language,
                    gameCode: getGameData.gameCode,
                    packageName: getGameData.packageName,
                    os: getGameData.os,
                    appid: appid,
                    tag: "website",
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    isClick = false;
                    $(".loading").show();
                    $(".showad").show();
                },
                success: function success(data) {
                    afterClick();
                    $(".loading").hide();
                    $(".showad").hide();
                    if (data.code == "6004") {
                        $.ajax({
                            url: Api.userPartnerLogin_api,
                            type: "POST",
                            data: {
                                siteUsername: data.siteUsername,
                                sitecode: data.sitecode,
                                password: data.password,
                                time: data.time,
                                email: data.email,
                                fbname: data.fbname,
                                language: getGameData.language,
                                gameCode: getGameData.gameCode,
                                packageName: getGameData.packageName,
                                os: getGameData.os,
                            },
                            dataType: "jsonp",
                            jsonp: "callback",
                            success: function success(res) {
                                if (res.code == "1400") {
                                    sessionID = res.sessionID;
                                    $.ajax({
                                        type: "POST",
                                        url: Api.userUpgradeAccount_api,
                                        data: {
                                            username: fb_phone,
                                            password: fb_userpassword,
                                            repassword: fb_repeatpassword,
                                            email: fb_email,
                                            SessionID_LP: sessionID,
                                            language: getGameData.language,
                                            gameCode: getGameData.gameCode,
                                            packageName: getGameData.packageName,
                                            os: getGameData.os,
                                        },
                                        dataType: "jsonp",
                                        beforeSend: function beforeSend(e) {
                                            $(".loading").show();
                                            $(".showad").show();
                                            isClick = false;
                                        },
                                        success: function success(res) {
                                            $(".loading").hide();
                                            $(".showad").hide();
                                            afterClick();
                                            console.log(res);
                                            if (res.code === "1110") {
                                                $.ajax({
                                                    url: Api.userLogin_api,
                                                    type: "POST",
                                                    data: {
                                                        username: fb_phone,
                                                        password: fb_userpassword,
                                                        siteCode: "damoregame",
                                                        t: "1487665362664",
                                                        ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                                                        ismobile: "yes",
                                                        language: language_str,
                                                        gameCode: gameCode_str,
                                                        packageName: packageName_str,
                                                    },
                                                    dataType: "jsonp",
                                                    beforeSend: function beforeSend(
                                                        e) {
                                                        $(".loading")
                                                            .show();
                                                        $(".showad")
                                                            .show();
                                                    },
                                                    success: function success(
                                                        res) {
                                                        $(".loading")
                                                            .hide();
                                                        $(".showad")
                                                            .hide();
                                                        if (res.code ===
                                                            "1000") {
                                                            //成功
                                                            sessionID =
                                                                res
                                                                .sessionID;
                                                            $.ajax({
                                                                type: "POST",
                                                                url: Api
                                                                    .userMobileAuth_api,
                                                                data: {
                                                                    sitecode: siteCode_str,
                                                                    type: res
                                                                        .type,
                                                                    os: os_str,
                                                                    SessionID_LP: res
                                                                        .sessionID,
                                                                    language: language_str,
                                                                    gameCode: gameCode_str,
                                                                    packageName: packageName_str,
                                                                    packageVersion: packageVersion_str,
                                                                },
                                                                dataType: "jsonp",
                                                                beforeSend: function beforeSend(
                                                                    e
                                                                ) {
                                                                    $(".loading")
                                                                        .show();
                                                                    $(".showad")
                                                                        .show();
                                                                },
                                                                success: function success(
                                                                    res
                                                                ) {
                                                                    $(".loading")
                                                                        .hide();
                                                                    $(".showad")
                                                                        .hide();
                                                                    console
                                                                        .log(
                                                                            res
                                                                        );
                                                                    sendData
                                                                        =
                                                                        JSON
                                                                        .stringify(
                                                                            res
                                                                        );
                                                                    loginCallback
                                                                        (
                                                                            sendData
                                                                        );
                                                                },
                                                            });
                                                        } else {
                                                            alert(res
                                                                .msg
                                                            );
                                                        }
                                                    },
                                                });
                                            } else {
                                                alert(res.msg);
                                            }
                                        },
                                    });
                                } else {
                                    alert(res.msg);
                                }
                            },
                        });
                    } else {
                        alert(data.msg);
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    }

    function tryUpgradeAccount() {
        var play_phone = $("#play_username_ns").val();
        var play_userpassword = $("#play_userpassword_ns").val();
        var play_repeatpassword = $("#play_repeatpassword_ns").val();
        var play_email = $("#play_email_ns").val();

        var getGameData = JSON.parse(localStorage.getItem("gameData"));
        var tryToGameData = JSON.parse(localStorage.getItem("tryToGameData"));

        if (
            play_phone &&
            play_userpassword &&
            play_repeatpassword &&
            play_email
        ) {
            $.ajax({
                type: "POST",
                url: Api.userFastLogin_api,
                data: {
                    isFirst: "no",
                    id: tryToGameData.id,
                    siteCode: tryToGameData.siteCode,
                    t: tryToGameData.t,
                    ps: tryToGameData.ps,
                    imeiNum: generateUUID(),
                    xuhaoNum: generateUUID(),
                    language: language_str,
                    gameCode: gameCode_str,
                    packageName: packageName_str,
                    os: os_str,
                },
                dataType: "jsonp",
                beforeSend: function beforeSend(e) {
                    $(".loading").show();
                    $(".showad").show();
                    isClick = false;
                },
                success: function success(res) {
                    console.log(res);
                    $(".loading").hide();
                    $(".showad").hide();
                    afterClick();
                    if (res.code === "1400") {
                        tryToGameData = {
                            id: res.id,
                            siteCode: res.siteCode,
                            t: res.t,
                            ps: res.ps,
                        };
                        console.log(tryToGameData);
                        sessionID = res.sessionID;

                        localStorage.setItem(
                            "tryToGameData",
                            JSON.stringify(tryToGameData)
                        );
                        $.ajax({
                            type: "POST",
                            url: Api.userUpgradeAccount_api,
                            data: {
                                username: play_phone,
                                password: play_userpassword,
                                repassword: play_repeatpassword,
                                email: play_email,
                                SessionID_LP: sessionID,
                                language: getGameData.language,
                                gameCode: getGameData.gameCode,
                                packageName: getGameData.packageName,
                                os: getGameData.os,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                            },
                            success: function success(data) {
                                $(".loading").hide();
                                $(".showad").hide();
                                console.log(data);
                                if (data.code === "1110") {
                                    trydata = {
                                        name: play_phone,
                                        type: "player",
                                        icon: "icon-94",
                                        siteCode: res.siteCode,
                                        t: res.t,
                                        ps: res.ps,
                                        id: res.id,
                                        typename: "Player",
                                    };
                                    tryLoginData = [];
                                    tryLoginData.push(trydata);
                                    localStorage.setItem(
                                        gettryLoginData_c,
                                        JSON.stringify(tryLoginData)
                                    );

                                    $.ajax({
                                        url: Api.userLogin_api,
                                        type: "POST",
                                        data: {
                                            username: play_phone,
                                            password: play_userpassword,
                                            siteCode: "damoregame",
                                            t: "1487665362664",
                                            ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                                            ismobile: "yes",
                                            language: language_str,
                                            gameCode: gameCode_str,
                                            packageName: packageName_str,
                                        },
                                        dataType: "jsonp",
                                        beforeSend: function beforeSend(e) {
                                            $(".loading").show();
                                            $(".showad").show();
                                        },
                                        success: function success(res) {
                                            $(".loading").hide();
                                            $(".showad").hide();
                                            if (res.code === "1000") {
                                                //成功
                                                sessionID = res.sessionID;
                                                $.ajax({
                                                    type: "POST",
                                                    url: Api
                                                        .userMobileAuth_api,
                                                    data: {
                                                        sitecode: siteCode_str,
                                                        type: res.type,
                                                        os: os_str,
                                                        SessionID_LP: res
                                                            .sessionID,
                                                        language: language_str,
                                                        gameCode: gameCode_str,
                                                        packageName: packageName_str,
                                                        packageVersion: packageVersion_str,
                                                    },
                                                    dataType: "jsonp",
                                                    beforeSend: function beforeSend(
                                                        e) {
                                                        $(".loading")
                                                            .show();
                                                        $(".showad")
                                                            .show();
                                                    },
                                                    success: function success(
                                                        res) {
                                                        $(".loading")
                                                            .hide();
                                                        $(".showad")
                                                            .hide();
                                                        console.log(
                                                            res);
                                                        sendData = JSON
                                                            .stringify(
                                                                res);
                                                        loginCallback(
                                                            sendData
                                                        );
                                                    },
                                                });
                                            } else {
                                                alert(res.msg);
                                            }
                                        },
                                    });
                                } else {
                                    alert(data.msg);
                                }
                            },
                        });
                    }
                },
            });
        } else {
            alert("賬號或密碼不能為空");;
        }
    }

    function loginCallback(data) {
        console.log(data);
        window.Callback.loginCallback(true, data);
    }

    var FBID = 0;
    var accessToken = 0;
    var FBName = "";

    var name = "code";

    if (name) {
        ch = GetQueryString(name);
        if (ch) {
            getMakeLogin();
        }
    }

    //fb登錄
    function getMakeLogin() {
        $.ajax({
            url: "//gc-fhzwkr.tprsigame.com/baseFacebook/login.do",
            type: "POST",
            data: {
                fbAppID: appid,
                redirectUrl: redirect_url,
                code: ch,
            },
            dataType: "jsonp",
            success: function success(res) {
                console.log(res);
                accessToken = res.access_token;
                if (res.code === "1000") {
                    $.ajax({
                        url: "https://graph.facebook.com/v5.0/me?access_token=" +
                            res.access_token +
                            "",
                        type: "GET",
                        data: {},
                        dataType: "json",
                        success: function success(result) {
                            console.log(result);
                            FBID = result.id;
                            FBName = result.name;
                            accessToken = res.access_token;
                            isFbLogin = 1;
                            localStorage.setItem("FbLogin", isFbLogin);
                            if (res.code === "1000") {
                                getLogin(accessToken);
                                var time = new Date().getTime();
                                fbdata = {
                                    typename: "FackBook",
                                    name: FBName,
                                    accessToken: accessToken,
                                    type: "fb",
                                    time: time,
                                    icon: "icon-Facebook",
                                };

                                fbLoginData.push(fbdata);
                                localStorage.setItem(
                                    getfbLoginData_c,
                                    JSON.stringify(fbLoginData) || "[]"
                                );
                            }
                        },
                    });
                }
            },
        });
    }

    function getLogin(accessToken) {
        var getGameData = JSON.parse(localStorage.getItem("gameData"));
        console.log(getGameData);
        $.ajax({
            url: Api.fbuserLoginForMobile_api,
            type: "POST",
            data: {
                access_token: accessToken,
                language: getGameData.language,
                gameCode: getGameData.gameCode,
                packageName: getGameData.packageName,
                os: getGameData.os,
                appid: appid,
                tag: "website",
            },
            dataType: "jsonp",
            beforeSend: function beforeSend(e) {
                isClick = false;
                $(".loading").show();
                $(".showad").show();
            },
            success: function success(data) {
                afterClick();
                $(".loading").hide();
                $(".showad").hide();
                if (data.code == "6004") {
                    $.ajax({
                        url: Api.userPartnerLogin_api,
                        type: "POST",
                        data: {
                            siteUsername: data.siteUsername,
                            sitecode: data.sitecode,
                            password: data.password,
                            time: data.time,
                            email: data.email,
                            fbname: data.fbname,
                            language: getGameData.language,
                            gameCode: getGameData.gameCode,
                            packageName: getGameData.packageName,
                            os: getGameData.os,
                        },
                        dataType: "jsonp",
                        jsonp: "callback",
                        success: function success(res) {
                            if (res.code == "1400") {
                                sessionID = res.sessionID;
                                $.ajax({
                                    type: "POST",
                                    url: Api.userMobileAuth_api,
                                    data: {
                                        sitecode: getGameData.siteCode,
                                        type: res.type,
                                        os: getGameData.os,
                                        SessionID_LP: res.sessionID,
                                        language: getGameData.language,
                                        gameCode: getGameData.gameCode,
                                        packageName: getGameData.packageName,
                                        packageVersion: packageVersion_str,
                                    },
                                    dataType: "jsonp",
                                    success: function success(res) {
                                        console.log(res);
                                        sendData = JSON.stringify(res);
                                        loginCallback(sendData);
                                    },
                                });
                            } else {
                                alert(res.msg);
                            }
                        },
                        error: function error() {},
                    });
                } else {
                    alert(data.msg);
                }
            },
            error: function error() {},
        });
    }

    document.querySelector(".handle3").onclick = function () {
        document.querySelector(".automatic_login_ns").style.display = "none";
        document.querySelector(".login_inp").style.display = "block";
    };
    document.querySelector(".login_logo_inp .back_ns").onclick = function () {
        document.querySelector(".automatic_login_ns").style.display = "block";
        document.querySelector(".login_inp").style.display = "none";
    };
    document.querySelector(".forget_password_ns").onclick = function () {
        document.querySelector(".forget_password").style.display = "block";
        document.querySelector(".login_inp").style.display = "none";
    };
    document.querySelector(
        ".login_logo_forget .back_ns"
    ).onclick = function () {
        document.querySelector(".forget_password").style.display = "none";
        document.querySelector(".login_inp").style.display = "block";
    };
    document.querySelector(".click_registered_ns").onclick = function () {
        document.querySelector(".login_inp").style.display = "none";
        document.querySelector(".login_zc").style.display = "block";
    };
    document.querySelector(".login_logo_zc .back_ns").onclick = function () {
        document.querySelector(".login_zc").style.display = "none";
        document.querySelector(".login_inp").style.display = "block";
    };
    document.querySelector(".account_management_ns").onclick = function () {
        document.querySelector(".login_inp").style.display = "none";
        document.querySelector(".account_management").style.display = "block";
    };
    document.querySelector(
        ".login_logo_account>.back_ns"
    ).onclick = function () {
        document.querySelector(".account_management").style.display = "none";
        document.querySelector(".login_inp").style.display = "block";
    };
    document.querySelector(
        ".login_logo_changePass>.back_ns"
    ).onclick = function () {
        document.querySelector(".account_changePass").style.display = "none";
        document.querySelector(".account_management").style.display = "block";
    };
    document.querySelector(".login_logo_play>.back_ns").onclick = function () {
        document.querySelector(".account_play").style.display = "none";
        document.querySelector(".account_management").style.display = "block";
    };
    document.querySelector(".login_logo_fb>.back_ns").onclick = function () {
        document.querySelector(".account_fb").style.display = "none";
        document.querySelector(".account_management").style.display = "block";
    };
    document.querySelector(".account1_ns").onclick = function () {
        document.querySelector(".account_management").style.display = "none";
        document.querySelector(".account_changePass").style.display = "block";
    };
    document.querySelector(".account2_ns").onclick = function () {
        document.querySelector(".account_management").style.display = "none";
        document.querySelector(".account_play").style.display = "block";
    };
    document.querySelector(".account3_ns").onclick = function () {
        document.querySelector(".account_management").style.display = "none";
        document.querySelector(".account_fb").style.display = "block";
    };
    document.querySelector(".sel-down").onclick = function () {
        document.querySelector(".sel-down").style.display = "none";
        document.querySelector(".down_list").style.display = "block";
        document.querySelector(".sel-up").style.display = "block";
    };
    // document.querySelector(".sel-up").onclick = function () {
    //     document.querySelector(".sel-down").style.display = "block"
    //     document.querySelector(".down_list").style.display = "none"
    //     document.querySelector(".sel-up").style.display = "none"
    // }
    // document.querySelector(".down_list").addEventListener("click", ".item", function () {
    //     document.querySelector(".sel-down").style.display = "block"
    //     document.querySelector(".down_list").style.display = "none"
    //     document.querySelector(".sel-up").style.display = "none"
    // })
    $(".sel-up").click(function () {
        $(".down_list").fadeOut(500);
        $(".sel-down").show();
        $(".sel-up").hide();
    });
    $(".login_username_ns").on("focus keyup", function () {
        var val = $(this).val();
        if (val != "") {
            $(this).next().show();
        } else if (val == "") {
            $(this).next().hide();
        }
    });

    $(".clear_ns").click(function () {
        clearUser(this);
    });

    function clearUser(obj) {
        var pass = $(obj).prev();
        pass.val("");
    }
    $(".show_ns").click(function () {
        showPass(this);
    });

    function showPass(obj) {
        var pass = $(obj).prev();
        var temp = pass.val();
        var img = $(obj).children();
        var ret = pass.attr("type");
        if (ret == "password") {
            pass.attr("type", "text");
            img.attr(
                "src",
                "//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear.png"
            );
        } else {
            pass.attr("type", "password");
            img.attr(
                "src",
                "//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png"
            );
        }
        pass.val(temp);
    }
    $(".item").click(function () {
        $(".down_list").hide();
        $(".sel-down").show();
        $(".sel-up").hide();
    });

    console.log(getTryLoginData);
    if (
        getFbLoginData.length === 0 &&
        getPtLoginData.length === 0 &&
        getTryLoginData.length === 0
    ) {
        $(".down_list").hide();
    } else if (getFbLoginData && getPtLoginData && getTryLoginData) {
        console.log("三个数组都有");
        var arrData = [].concat(
            _toConsumableArray(getPtLoginData),
            _toConsumableArray(getFbLoginData),
            _toConsumableArray(getTryLoginData)
        );
        arrData.sort(compare("time"));
        console.log(arrData);
        $(".sel-title").text(arrData[arrData.length - 1].name);
        $(".sel-img").addClass(arrData[arrData.length - 1].icon);
        var str = "";
        for (var i = 0; i < arrData.length; i++) {
            var index = i;
            str +=
                ' <li class="item' +
                index +
                '">\n                        <span class="item-img iconfont ' +
                arrData[index].icon +
                '"></span>\n                        <span class="item-title">' +
                arrData[index].name +
                '</span>\n                        <span class="item-down iconfont icon-shanchu"></span>\n               </li>';
        }
        $(".down_list ul").html(str);
    }

    var gamedata = JSON.parse(localStorage.getItem("gameData"));

    $("ul").on("click", ".item-down", function () {
        var index = $(this).parent().index();
        console.log(arrData);
        if (arrData[index].type === "fb") {
            if (window.confirm("是否要刪除該賬號記錄")) {
                console.log(getFbLoginData[index]);
                var delData = getFbLoginData.indexOf(arrData[index]);
                getFbLoginData.splice(delData, 1);
                localStorage.setItem("fbLoginData", JSON.stringify(getFbLoginData));
                localStorage.removeItem("FbLogin");

                if (getFbLoginData.length === 0) {
                    getFbLoginData = [];
                    if (getPtLoginData.length > 0 && getTryLoginData.length > 0) {
                        console.log(getPtLoginData);
                        arrData = [].concat(
                            _toConsumableArray(getPtLoginData),
                            _toConsumableArray(getTryLoginData)
                        );
                        str = "";

                        $(".sel-title").text(getPtLoginData[0].name);
                        $(".sel-img")
                            .removeClass("icon-Facebook")
                            .addClass(getPtLoginData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else if (
                        getPtLoginData.length > 0 &&
                        getTryLoginData.length === 0
                    ) {
                        console.log(getPtLoginData);
                        arrData = [].concat(_toConsumableArray(getPtLoginData));
                        str = "";

                        $(".sel-title").text(getPtLoginData[0].name);
                        $(".sel-img")
                            .removeClass("icon-Facebook")
                            .addClass(getPtLoginData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else if (
                        getPtLoginData.length === 0 &&
                        getTryLoginData.length > 0
                    ) {
                        console.log(getPtLoginData);
                        arrData = [].concat(_toConsumableArray(getTryLoginData));
                        str = "";

                        $(".sel-title").text(getTryLoginData[0].name);
                        $(".sel-img")
                            .removeClass("icon-Facebook")
                            .addClass(getTryLoginData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else {
                        $(".down_list ul").html("");
                        $(".sel-title").text("");
                        $(".sel-img").removeClass("icon-Facebook");
                    }
                }
                $(".down_list").hide();
                $(".sel-up").hide();
                $(".sel-down").show();
            }
        } else if (arrData[index].type === "pt") {
            if (window.confirm("是否要刪除該賬號記錄")) {
                console.log(arrData[index]);
                var selData = getPtLoginData.indexOf(arrData[index]);
                getPtLoginData.splice(selData, 1);
                localStorage.setItem("ptLoginData", JSON.stringify(getPtLoginData));
                console.log(arrData);
                console.log(getPtLoginData);
                // location.reload(true)
                if (getPtLoginData.length === 0) {
                    getPtLoginData = [];
                    console.log(getFbLoginData);
                    str = "";
                    if (getFbLoginData.length > 0 && getTryLoginData.length > 0) {
                        arrData = [].concat(
                            _toConsumableArray(getFbLoginData),
                            _toConsumableArray(getTryLoginData)
                        );
                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else if (
                        getFbLoginData.length > 0 &&
                        getTryLoginData.length === 0
                    ) {
                        arrData = [].concat(
                            _toConsumableArray(getFbLoginData),
                            _toConsumableArray(getTryLoginData)
                        );
                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);
                        str = "";
                        str +=
                            ' <li class="item' +
                            index +
                            '">\n                                        <span class="item-img iconfont ' +
                            arrData[0].icon +
                            '"></span>\n                                        <span class="item-title">' +
                            arrData[0].name +
                            '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        $(".down_list ul").html(str);
                    } else if (
                        getFbLoginData.length === 0 &&
                        getTryLoginData.length > 0
                    ) {
                        arrData = [].concat(
                            _toConsumableArray(getFbLoginData),
                            _toConsumableArray(getTryLoginData)
                        );
                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);
                        str = "";
                        str +=
                            ' <li class="item' +
                            index +
                            '">\n                                        <span class="item-img iconfont ' +
                            arrData[0].icon +
                            '"></span>\n                                        <span class="item-title">' +
                            arrData[0].name +
                            '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        $(".down_list ul").html(str);
                    } else {
                        $(".down_list ul").html("");
                        $(".sel-title").text("");
                        $(".sel-img").removeClass("icon-people");
                    }
                } else {
                    console.log("1");
                    if (
                        getFbLoginData.length > 0 &&
                        getPtLoginData &&
                        getTryLoginData.length > 0
                    ) {
                        str = "";
                        arrData = [].concat(
                            _toConsumableArray(getPtLoginData),
                            _toConsumableArray(getFbLoginData),
                            _toConsumableArray(getTryLoginData)
                        );
                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);
                        arrData.forEach(function (item, index) {
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                    <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                    <span class="item-title">' +
                                item.name +
                                '</span>\n                                    <span class="item-down iconfont icon-shanchu"></span>\n                                </li>';
                        });
                        $(".down_list ul").html(str);
                    } else if (
                        getFbLoginData.length === 0 &&
                        getPtLoginData &&
                        getTryLoginData.length > 0
                    ) {
                        str = "";
                        arrData = [].concat(
                            _toConsumableArray(getPtLoginData),
                            _toConsumableArray(getTryLoginData)
                        );
                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);
                        arrData.forEach(function (item, index) {
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                    <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                    <span class="item-title">' +
                                item.name +
                                '</span>\n                                    <span class="item-down iconfont icon-shanchu"></span>\n                                </li>';
                        });
                        $(".down_list ul").html(str);
                    } else if (
                        getFbLoginData.length > 0 &&
                        getPtLoginData &&
                        getTryLoginData.length === 0
                    ) {
                        str = "";
                        arrData = [].concat(
                            _toConsumableArray(getPtLoginData),
                            _toConsumableArray(getFbLoginData)
                        );
                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);
                        arrData.forEach(function (item, index) {
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                    <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                    <span class="item-title">' +
                                item.name +
                                '</span>\n                                    <span class="item-down iconfont icon-shanchu"></span>\n                                </li>';
                        });
                        $(".down_list ul").html(str);
                    } else if (
                        getFbLoginData.length === 0 &&
                        getPtLoginData &&
                        getTryLoginData.length === 0
                    ) {
                        console.log("2");
                        str = "";
                        arrData = [].concat(_toConsumableArray(getPtLoginData));

                        $(".sel-title").text(arrData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(arrData[0].icon);
                        arrData.forEach(function (item, index) {
                            console.log(index);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                    <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                    <span class="item-title">' +
                                item.name +
                                '</span>\n                                    <span class="item-down iconfont icon-shanchu"></span>\n                                  </li>';
                        });
                        $(".down_list ul").html(str);
                    }
                }
                $(".down_list").hide();
                $(".sel-up").hide();
                $(".sel-down").show();
            }
        } else if (arrData[index].type === "player") {
            if (window.confirm("是否要刪除該賬號記錄")) {
                console.log(getTryLoginData[index]);

                var tryDelData = getTryLoginData.indexOf(arrData[index]);
                getTryLoginData.splice(tryDelData, 1);
                localStorage.setItem("tryLoginData", JSON.stringify(getTryLoginData));
                localStorage.removeItem("FirstLogin");

                if (getTryLoginData.length === 0) {
                    getTryLoginData = [];
                    if (getPtLoginData.length > 0 && getFbLoginData.length > 0) {
                        console.log(getPtLoginData);
                        arrData = [].concat(
                            _toConsumableArray(getPtLoginData),
                            _toConsumableArray(getFbLoginData)
                        );
                        str = "";

                        $(".sel-title").text(getPtLoginData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(getPtLoginData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else if (
                        getPtLoginData.length > 0 &&
                        getFbLoginData.length === 0
                    ) {
                        console.log(getPtLoginData);
                        arrData = [].concat(_toConsumableArray(getPtLoginData));
                        str = "";

                        $(".sel-title").text(getPtLoginData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(getPtLoginData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else if (
                        getPtLoginData.length === 0 &&
                        getFbLoginData.length > 0
                    ) {
                        console.log(getPtLoginData);
                        arrData = [].concat(_toConsumableArray(getFbLoginData));
                        str = "";

                        $(".sel-title").text(getFbLoginData[0].name);
                        $(".sel-img")
                            .removeClass("icon-people")
                            .addClass(getFbLoginData[0].icon);

                        arrData.forEach(function (item, index) {
                            console.log(item);
                            str +=
                                ' <li class="item' +
                                index +
                                '">\n                                        <span class="item-img iconfont ' +
                                item.icon +
                                '"></span>\n                                        <span class="item-title">' +
                                item.name +
                                '</span>\n                                        <span class="item-down iconfont icon-shanchu"></span>\n                            </li>';
                        });

                        $(".down_list ul").html(str);
                    } else {
                        $(".down_list ul").html("");
                        $(".sel-title").text("");
                        $(".sel-img").removeClass("icon-94");
                    }
                }
                $(".down_list").hide();
                $(".sel-up").hide();
                $(".sel-down").show();
            }
        }
    });

    $("ul").on("click", ".item-title", function () {
        var indexs = $(this).parent().index();
        if (arrData[indexs].type === "fb") {
            $(".sel-title").text(arrData[indexs].name);
            $(".sel-img")
                .removeClass("icon-people icon-94")
                .addClass(arrData[indexs].icon);
            $(".down_list").hide();
            $(".sel-up").hide();
            $(".sel-down").show();
        } else if (arrData[indexs].type === "pt") {
            $(".sel-title").text(arrData[indexs].name);
            $(".sel-img")
                .removeClass("icon-Facebook icon-94")
                .addClass(arrData[indexs].icon);
            $(".down_list").hide();
            $(".sel-up").hide();
            $(".sel-down").show();
        } else if (arrData[indexs].type === "player") {
            $(".sel-title").text(arrData[indexs].name);
            $(".sel-img")
                .removeClass("icon-Facebook icon-people")
                .addClass(arrData[indexs].icon);
            $(".down_list").hide();
            $(".sel-up").hide();
            $(".sel-down").show();
        }
    });

    $("#enter_game_ns").click(function () {
        var username = $(".sel-title").text();
        console.log(username);
        console.log(isClick);

        if (isClick) {
            var _loop = function _loop(ch) {
                var chindex = ch;

                if (arrData[chindex].type === "pt") {
                    if (arrData[chindex].name === username) {
                        $.ajax({
                            url: Api.userLogin_api,
                            type: "POST",
                            data: {
                                username: arrData[chindex].name,
                                password: arrData[chindex].password,
                                siteCode: "damoregame",
                                t: "1487665362664",
                                ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                                ismobile: "yes",
                                language: gamedata.language,
                                gameCode: gamedata.gameCode,
                                packageName: gamedata.packageName,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                                isClick = false;
                            },
                            success: function success(res) {
                                $(".loading").hide();
                                $(".showad").hide();
                                afterClick();
                                if (res.code === "1000") {
                                    //成功
                                    sessionID = res.sessionID;
                                    $.ajax({
                                        type: "POST",
                                        url: Api.userMobileAuth_api,
                                        data: {
                                            sitecode: gamedata.siteCode,
                                            type: res.type,
                                            os: gamedata.os,
                                            SessionID_LP: res.sessionID,
                                            language: gamedata.language,
                                            gameCode: gamedata.gameCode,
                                            packageName: gamedata.packageName,
                                            packageVersion: gamedata.packageVersion,
                                        },
                                        dataType: "jsonp",
                                        success: function success(res) {
                                            console.log(chindex);
                                            console.log(arrData[chindex]);

                                            var timer = new Date().getTime();
                                            arrData[chindex].time = timer;

                                            if (
                                                getPtLoginData[chindex].name ===
                                                arrData[chindex].name
                                            ) {
                                                getPtLoginData[chindex] = arrData[
                                                    chindex];
                                            }
                                            localStorage.setItem(
                                                "ptLoginData",
                                                JSON.stringify(getPtLoginData)
                                            );
                                            sendData = JSON.stringify(res);
                                            loginCallback(sendData);
                                        },
                                    });
                                } else {
                                    alert(res.msg);
                                }
                            },
                        });
                    }
                } else if (arrData[chindex].type === "fb") {
                    if (arrData[chindex].name === username) {
                        var getGameData = JSON.parse(localStorage.getItem("gameData"));
                        $.ajax({
                            url: Api.fbuserLoginForMobile_api,
                            type: "POST",
                            data: {
                                access_token: arrData[chindex].accessToken,
                                language: getGameData.language,
                                gameCode: getGameData.gameCode,
                                packageName: getGameData.packageName,
                                os: getGameData.os,
                                appid: appid,
                                tag: "website",
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                            },
                            success: function success(data) {
                                $(".loading").hide();
                                $(".showad").hide();
                                $(".quitLogion").hide();
                                if (data.code == "6004") {
                                    $.ajax({
                                        url: Api.userPartnerLogin_api,
                                        type: "POST",
                                        data: {
                                            siteUsername: data.siteUsername,
                                            sitecode: data.sitecode,
                                            password: data.password,
                                            time: data.time,
                                            email: data.email,
                                            fbname: data.fbname,
                                            language: getGameData.language,
                                            gameCode: getGameData.gameCode,
                                            packageName: getGameData.packageName,
                                            os: getGameData.os,
                                        },
                                        dataType: "jsonp",
                                        jsonp: "callback",
                                        success: function success(res) {
                                            if (res.code == "1400") {
                                                sessionID = res.sessionID;
                                                $.ajax({
                                                    type: "POST",
                                                    url: Api
                                                        .userMobileAuth_api,
                                                    data: {
                                                        sitecode: getGameData
                                                            .siteCode,
                                                        type: res.type,
                                                        os: getGameData.os,
                                                        SessionID_LP: res
                                                            .sessionID,
                                                        language: getGameData
                                                            .language,
                                                        gameCode: getGameData
                                                            .gameCode,
                                                        packageName: getGameData
                                                            .packageName,
                                                        packageVersion: packageVersion_str,
                                                    },
                                                    dataType: "jsonp",
                                                    success: function success(
                                                        res) {
                                                        console.log(
                                                            res);
                                                        var timer =
                                                            new Date()
                                                            .getTime();
                                                        arrData[chindex]
                                                            .time =
                                                            timer;
                                                        localStorage
                                                            .setItem(
                                                                "fbLoginData",
                                                                JSON
                                                                .stringify(
                                                                    [arrData[
                                                                        chindex
                                                                    ]]
                                                                )
                                                            );
                                                        sendData = JSON
                                                            .stringify(
                                                                res);
                                                        loginCallback(
                                                            sendData
                                                        );
                                                    },
                                                });
                                            } else {
                                                alert(res.msg);
                                            }
                                        },
                                        error: function error() {},
                                    });
                                } else {
                                    alert(data.msg);
                                }
                            },
                            error: function error() {},
                        });
                    }
                } else if (arrData[chindex].typename === "Player") {
                    if (arrData[chindex].name === username) {
                        $.ajax({
                            type: "POST",
                            url: Api.userFastLogin_api,
                            data: {
                                isFirst: "no",
                                id: arrData[chindex].id,
                                siteCode: arrData[chindex].siteCode,
                                t: arrData[chindex].t,
                                ps: arrData[chindex].ps,
                                imeiNum: generateUUID(),
                                xuhaoNum: generateUUID(),
                                language: gamedata.language,
                                gameCode: gamedata.gameCode,
                                packageName: gamedata.packageName,
                                os: gamedata.os,
                            },
                            dataType: "jsonp",
                            beforeSend: function beforeSend(e) {
                                $(".loading").show();
                                $(".showad").show();
                                isClick = false;
                            },
                            success: function success(res) {
                                console.log(res);
                                $(".loading").show();
                                $(".showad").show();
                                afterClick();
                                if (res.code === "1400") {
                                    sessionID = res.sessionID;
                                    $.ajax({
                                        type: "POST",
                                        url: Api.userMobileAuth_api,
                                        data: {
                                            sitecode: gamedata.siteCode,
                                            type: res.type,
                                            os: gamedata.os,
                                            SessionID_LP: res.sessionID,
                                            language: gamedata.language,
                                            gameCode: gamedata.gameCode,
                                            packageName: gamedata.packageName,
                                            packageVersion: gamedata.packageVersion,
                                        },
                                        dataType: "jsonp",
                                        beforeSend: function beforeSend(e) {
                                            $(".loading").show();
                                            $(".showad").show();
                                        },
                                        success: function success(res) {
                                            $(".loading").hide();
                                            $(".showad").hide();
                                            var timer = new Date().getTime();
                                            arrData[chindex].time = timer;
                                            localStorage.setItem(
                                                "tryLoginData",
                                                JSON.stringify([arrData[
                                                    chindex]])
                                            );
                                            sendData = JSON.stringify(res);
                                            loginCallback(sendData);
                                        },
                                    });
                                }
                            },
                        });
                    }
                }
            };

            for (var ch = 0; ch < arrData.length; ch++) {
                _loop(ch);
            }
        }
    });
</script>

<!-- <script>
    "use strict";


    $(function () {
        function _toConsumableArray(arr) {
            if (arr === null) {
                arr = []
            }
            if (Array.isArray(arr)) {
                for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
                    arr2[i] = arr[i];
                }
                return arr2;
            } else {
                return Array.from(arr);
            }
        }

        //  var vConsole = new VConsole();
        // eruda.init();

        var isOpenRule = 0;
        var getisOpenRule = localStorage.getItem("isOpenRule");
        console.log(getisOpenRule);
        if (getisOpenRule === null) {
            isOpenRule = 0;
        } else {
            isOpenRule = getisOpenRule;
        }

        switch (isOpenRule) {
            case 1:
                break;
            case 0:
                $(".bg").hide();
                break;
        }


        var leftShow = false;
        $(".left-btn").on("click", function () {
            $(".left-raido").show();
            leftShow = true;
        });

        $(".left-raido").on("click", function () {
            $(".left-raido").hide();
            leftShow = false;
        });

        $(".close").click(function () {
            $(".bg").hide();
        });
        $(".arrbtn").click(function () {
            if (leftShow) {
                $(".bg").hide();
                leftShow = false;
                $(".left-raido").hide();

                isOpenRule = 1;
                localStorage.setItem("isOpenRule", isOpenRule);
            } else {
                alert(language.English.lp_register_code_agreerule);
            }
        });

        $(".handle3").click(function () {
            $(".automatic_login_ns").hide();
            $(".login_inp").show();
        });

        $(".login_logo_inp .back_ns").click(function () {
            $(".automatic_login_ns").show();
            $(".login_inp").hide();
        });
        $(".forget_password_ns").click(function () {
            $(".forget_password").show();
            $(".login_inp").hide();
        });
        $(".login_logo_forget .back_ns").click(function () {
            $(".forget_password").hide();
            $(".login_inp").show();
        });
        $(".click_registered_ns").click(function () {
            $(".login_inp").hide();
            $(".login_zc").show();
        });
        $(".login_logo_zc .back_ns").click(function () {
            $(".login_zc").hide();
            $(".login_inp").show();
        });
        $(".account_management_ns").click(function () {
            $(".login_inp").hide();
            $(".account_management").show();
        });
        $(".login_logo_account .back_ns").click(function () {
            $(".login_inp").show();
            $(".account_management").hide();
        });

        $(".login_logo_changePass .back_ns").click(function () {
            $(".account_changePass").hide();
            $(".account_management").show();
        });
        $(".login_logo_play .back_ns").click(function () {
            $(".account_play").hide();
            $(".account_management").show();
        });
        $(".login_logo_fb .back_ns").click(function () {
            $(".account_fb").hide();
            $(".account_management").show();
        });
        $(".account1_ns").click(function () {
            $(".account_management").hide();
            $(".account_changePass").show();
        });
        $(".account2_ns").click(function () {
            $(".account_management").hide();
            $(".account_play").show();
        });
        $(".account3_ns").click(function () {
            $(".account_management").hide();
            $(".account_fb").show();
        });

        $(".sel-down").click(function () {
            $(".down_list").fadeIn(500);
            $(".sel-down").hide();
            $(".sel-up").show();
        });

        $(".sel-up").click(function () {
            $(".down_list").fadeOut(500);
            $(".sel-down").show();
            $(".sel-up").hide();
        });

        $('.login_username_ns').on('focus keyup', function () {
            var val = $(this).val();
            if (val != '') {
                $(this).next().show();
            } else if (val == '') {
                $(this).next().hide();
            }
        });

        $('.clear_ns').click(function () {
            clearUser(this);
        });

        function clearUser(obj) {
            var pass = $(obj).prev();
            pass.val('');
        }
        $('.show_ns').click(function () {
            showPass(this);
        });

        function showPass(obj) {
            var pass = $(obj).prev();
            var temp = pass.val();
            var img = $(obj).children();
            var ret = pass.attr("type");
            if (ret == 'password') {
                pass.attr("type", "text");
                img.attr("src", "//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear.png");
            } else {
                pass.attr("type", "password");
                img.attr("src", "//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/img/ear_blue.png");
            }
            pass.val(temp);
        }

        $(".item").click(function () {
            $(".down_list").hide();
            $(".sel-down").show();
            $(".sel-up").hide();
        });

        var getFbLoginData = JSON.parse(localStorage.getItem("fbLoginData"));
        var getPtLoginData = JSON.parse(localStorage.getItem("ptLoginData"));
        var getTryLoginData = JSON.parse(localStorage.getItem("tryLoginData"));

        console.log(getTryLoginData);
        if (getFbLoginData.length === 0 && getPtLoginData.length === 0 && getTryLoginData.length === 0) {
            $(".down_list").hide();
        } else if (getFbLoginData && getPtLoginData && getTryLoginData) {
            console.log("三个数组都有");
            var arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(getFbLoginData),
                _toConsumableArray(getTryLoginData));
            arrData.sort(compare("time"));
            console.log(arrData);
            $(".sel-title").text(arrData[arrData.length - 1].name);
            $(".sel-img").addClass(arrData[arrData.length - 1].icon);
            var str = "";
            for (var i = 0; i < arrData.length; i++) {
                var index = i;
                str += " <li class=\"item" + index +
                    "\">\n                        <span class=\"item-img iconfont " + arrData[index].icon +
                    "\"></span>\n                        <span class=\"item-title\">" + arrData[index].name +
                    "</span>\n                        <span class=\"item-down iconfont icon-shanchu\"></span>\n               </li>";
            }
            $(".down_list ul").html(str);
        }

        var gamedata = JSON.parse(localStorage.getItem("gameData"));

        $("ul").on("click", ".item-down", function () {
            var index = $(this).parent().index();
            console.log(arrData);
            if (arrData[index].type === "fb") {
                if (window.confirm("是否要刪除該賬號記錄")) {
                    console.log(getFbLoginData[index]);
                    var delData = getFbLoginData.indexOf(arrData[index]);
                    getFbLoginData.splice(delData, 1);
                    localStorage.setItem("fbLoginData", JSON.stringify(getFbLoginData));
                    localStorage.removeItem("FbLogin");

                    if (getFbLoginData.length === 0) {
                        getFbLoginData = [];
                        if (getPtLoginData.length > 0 && getTryLoginData.length > 0) {
                            console.log(getPtLoginData);
                            arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(
                                getTryLoginData));
                            str = "";

                            $(".sel-title").text(getPtLoginData[0].name);
                            $(".sel-img").removeClass("icon-Facebook").addClass(getPtLoginData[0].icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else if (getPtLoginData.length > 0 && getTryLoginData.length === 0) {
                            console.log(getPtLoginData);
                            arrData = [].concat(_toConsumableArray(getPtLoginData));
                            str = "";

                            $(".sel-title").text(getPtLoginData[0].name);
                            $(".sel-img").removeClass("icon-Facebook").addClass(getPtLoginData[0].icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else if (getPtLoginData.length === 0 && getTryLoginData.length > 0) {
                            console.log(getPtLoginData);
                            arrData = [].concat(_toConsumableArray(getTryLoginData));
                            str = "";

                            $(".sel-title").text(getTryLoginData[0].name);
                            $(".sel-img").removeClass("icon-Facebook").addClass(getTryLoginData[0]
                                .icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else {
                            $(".down_list ul").html("");
                            $(".sel-title").text("");
                            $(".sel-img").removeClass("icon-Facebook");
                        }
                    }
                    $(".down_list").hide();
                    $(".sel-up").hide();
                    $(".sel-down").show();
                }
            } else if (arrData[index].type === "pt") {
                if (window.confirm("是否要刪除該賬號記錄")) {
                    console.log(arrData[index]);
                    var selData = getPtLoginData.indexOf(arrData[index]);
                    getPtLoginData.splice(selData, 1);
                    localStorage.setItem("ptLoginData", JSON.stringify(getPtLoginData));
                    console.log(arrData);
                    console.log(getPtLoginData);
                    // location.reload(true)
                    if (getPtLoginData.length === 0) {
                        getPtLoginData = [];
                        console.log(getFbLoginData);
                        str = "";
                        if (getFbLoginData.length > 0 && getTryLoginData.length > 0) {
                            arrData = [].concat(_toConsumableArray(getFbLoginData), _toConsumableArray(
                                getTryLoginData));
                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else if (getFbLoginData.length > 0 && getTryLoginData.length === 0) {
                            arrData = [].concat(_toConsumableArray(getFbLoginData), _toConsumableArray(
                                getTryLoginData));
                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);
                            str = "";
                            str += " <li class=\"item" + index +
                                "\">\n                                        <span class=\"item-img iconfont " +
                                arrData[0].icon +
                                "\"></span>\n                                        <span class=\"item-title\">" +
                                arrData[0].name +
                                "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            $(".down_list ul").html(str);
                        } else if (getFbLoginData.length === 0 && getTryLoginData.length > 0) {
                            arrData = [].concat(_toConsumableArray(getFbLoginData), _toConsumableArray(
                                getTryLoginData));
                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);
                            str = "";
                            str += " <li class=\"item" + index +
                                "\">\n                                        <span class=\"item-img iconfont " +
                                arrData[0].icon +
                                "\"></span>\n                                        <span class=\"item-title\">" +
                                arrData[0].name +
                                "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            $(".down_list ul").html(str);
                        } else {
                            $(".down_list ul").html("");
                            $(".sel-title").text("");
                            $(".sel-img").removeClass("icon-people");
                        }
                    } else {
                        console.log("1");
                        if (getFbLoginData.length > 0 && getPtLoginData && getTryLoginData.length > 0) {
                            str = "";
                            arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(
                                getFbLoginData), _toConsumableArray(getTryLoginData));
                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);
                            arrData.forEach(function (item, index) {
                                str += " <li class=\"item" + index +
                                    "\">\n                                    <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                    <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                    <span class=\"item-down iconfont icon-shanchu\"></span>\n                                </li>";
                            });
                            $(".down_list ul").html(str);
                        } else if (getFbLoginData.length === 0 && getPtLoginData && getTryLoginData
                            .length > 0) {
                            str = "";
                            arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(
                                getTryLoginData));
                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);
                            arrData.forEach(function (item, index) {
                                str += " <li class=\"item" + index +
                                    "\">\n                                    <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                    <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                    <span class=\"item-down iconfont icon-shanchu\"></span>\n                                </li>";
                            });
                            $(".down_list ul").html(str);
                        } else if (getFbLoginData.length > 0 && getPtLoginData && getTryLoginData
                            .length === 0) {
                            str = "";
                            arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(
                                getFbLoginData));
                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);
                            arrData.forEach(function (item, index) {
                                str += " <li class=\"item" + index +
                                    "\">\n                                    <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                    <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                    <span class=\"item-down iconfont icon-shanchu\"></span>\n                                </li>";
                            });
                            $(".down_list ul").html(str);
                        } else if (getFbLoginData.length === 0 && getPtLoginData && getTryLoginData
                            .length === 0) {
                            console.log("2");
                            str = "";
                            arrData = [].concat(_toConsumableArray(getPtLoginData));

                            $(".sel-title").text(arrData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(arrData[0].icon);
                            arrData.forEach(function (item, index) {
                                console.log(index);
                                str += " <li class=\"item" + index +
                                    "\">\n                                    <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                    <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                    <span class=\"item-down iconfont icon-shanchu\"></span>\n                                  </li>";
                            });
                            $(".down_list ul").html(str);
                        }
                    }
                    $(".down_list").hide();
                    $(".sel-up").hide();
                    $(".sel-down").show();
                }
            } else if (arrData[index].type === "player") {
                if (window.confirm("是否要刪除該賬號記錄")) {
                    console.log(getTryLoginData[index]);

                    var tryDelData = getTryLoginData.indexOf(arrData[index]);
                    getTryLoginData.splice(tryDelData, 1);
                    localStorage.setItem("tryLoginData", JSON.stringify(getTryLoginData));
                    localStorage.removeItem("FirstLogin");

                    if (getTryLoginData.length === 0) {
                        getTryLoginData = [];
                        if (getPtLoginData.length > 0 && getFbLoginData.length > 0) {
                            console.log(getPtLoginData);
                            arrData = [].concat(_toConsumableArray(getPtLoginData), _toConsumableArray(
                                getFbLoginData));
                            str = "";

                            $(".sel-title").text(getPtLoginData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(getPtLoginData[0].icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else if (getPtLoginData.length > 0 && getFbLoginData.length === 0) {
                            console.log(getPtLoginData);
                            arrData = [].concat(_toConsumableArray(getPtLoginData));
                            str = "";

                            $(".sel-title").text(getPtLoginData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(getPtLoginData[0].icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else if (getPtLoginData.length === 0 && getFbLoginData.length > 0) {
                            console.log(getPtLoginData);
                            arrData = [].concat(_toConsumableArray(getFbLoginData));
                            str = "";

                            $(".sel-title").text(getFbLoginData[0].name);
                            $(".sel-img").removeClass("icon-people").addClass(getFbLoginData[0].icon);

                            arrData.forEach(function (item, index) {
                                console.log(item);
                                str += " <li class=\"item" + index +
                                    "\">\n                                        <span class=\"item-img iconfont " +
                                    item.icon +
                                    "\"></span>\n                                        <span class=\"item-title\">" +
                                    item.name +
                                    "</span>\n                                        <span class=\"item-down iconfont icon-shanchu\"></span>\n                            </li>";
                            });

                            $(".down_list ul").html(str);
                        } else {
                            $(".down_list ul").html("");
                            $(".sel-title").text("");
                            $(".sel-img").removeClass("icon-94");
                        }
                    }
                    $(".down_list").hide();
                    $(".sel-up").hide();
                    $(".sel-down").show();
                }
            }
        });

        $("ul").on("click", ".item-title", function () {
            var indexs = $(this).parent().index();
            if (arrData[indexs].type === "fb") {
                $(".sel-title").text(arrData[indexs].name);
                $(".sel-img").removeClass("icon-people icon-94").addClass(arrData[indexs].icon);
                $(".down_list").hide();
                $(".sel-up").hide();
                $(".sel-down").show();
            } else if (arrData[indexs].type === "pt") {
                $(".sel-title").text(arrData[indexs].name);
                $(".sel-img").removeClass("icon-Facebook icon-94").addClass(arrData[indexs].icon);
                $(".down_list").hide();
                $(".sel-up").hide();
                $(".sel-down").show();
            } else if (arrData[indexs].type === "player") {
                $(".sel-title").text(arrData[indexs].name);
                $(".sel-img").removeClass("icon-Facebook icon-people").addClass(arrData[indexs].icon);
                $(".down_list").hide();
                $(".sel-up").hide();
                $(".sel-down").show();
            }
        });

        $("#enter_game_ns").click(function () {

            var username = $(".sel-title").text();
            console.log(username);
            console.log(isClick);

            if (isClick) {
                var _loop = function _loop(ch) {
                    var chindex = ch;

                    if (arrData[chindex].type === "pt") {
                        if (arrData[chindex].name === username) {
                            $.ajax({
                                url: Api.userLogin_api,
                                type: "POST",
                                data: {
                                    username: arrData[chindex].name,
                                    password: arrData[chindex].password,
                                    siteCode: "damoregame",
                                    t: "1487665362664",
                                    ck: "7e1d4d53a5d436be64a26dbbca1c511e",
                                    ismobile: "yes",
                                    language: gamedata.language,
                                    gameCode: gamedata.gameCode,
                                    packageName: gamedata.packageName
                                },
                                dataType: "jsonp",
                                beforeSend: function beforeSend(e) {
                                    $(".loading").show();
                                    $(".showad").show();
                                    isClick = false;
                                },
                                success: function success(res) {
                                    $(".loading").hide();
                                    $(".showad").hide();
                                    afterClick();
                                    if (res.code === "1000") {
                                        //成功
                                        sessionID = res.sessionID;
                                        $.ajax({
                                            type: "POST",
                                            url: Api.userMobileAuth_api,
                                            data: {
                                                sitecode: gamedata.siteCode,
                                                type: res.type,
                                                os: gamedata.os,
                                                SessionID_LP: res.sessionID,
                                                language: gamedata.language,
                                                gameCode: gamedata.gameCode,
                                                packageName: gamedata
                                                    .packageName,
                                                packageVersion: gamedata
                                                    .packageVersion
                                            },
                                            dataType: "jsonp",
                                            success: function success(res) {
                                                console.log(chindex);
                                                console.log(arrData[
                                                    chindex]);

                                                var timer = new Date()
                                                    .getTime();
                                                arrData[chindex].time =
                                                    timer;

                                                if (getPtLoginData[chindex]
                                                    .name === arrData[
                                                        chindex].name) {
                                                    getPtLoginData[
                                                            chindex] =
                                                        arrData[
                                                            chindex];
                                                }
                                                localStorage.setItem(
                                                    "ptLoginData", JSON
                                                    .stringify(
                                                        getPtLoginData));
                                                sendData = JSON.stringify(
                                                    res);
                                                loginCallback(sendData);
                                            }
                                        });
                                    } else {
                                        alert(res.msg);
                                    }
                                }
                            });
                        }
                    } else if (arrData[chindex].type === "fb") {
                        if (arrData[chindex].name === username) {
                            var getGameData = JSON.parse(localStorage.getItem("gameData"));
                            $.ajax({
                                url: Api.fbuserLoginForMobile_api,
                                type: 'POST',
                                data: {
                                    access_token: arrData[chindex].accessToken,
                                    language: getGameData.language,
                                    gameCode: getGameData.gameCode,
                                    packageName: getGameData.packageName,
                                    os: getGameData.os,
                                    appid: appid,
                                    tag: "website"
                                },
                                dataType: 'jsonp',
                                beforeSend: function beforeSend(e) {
                                    $(".loading").show();
                                    $(".showad").show();
                                },
                                success: function success(data) {
                                    $(".loading").hide();
                                    $(".showad").hide();
                                    $(".quitLogion").hide();
                                    if (data.code == "6004") {
                                        $.ajax({
                                            url: Api.userPartnerLogin_api,
                                            type: 'POST',
                                            data: {
                                                siteUsername: data.siteUsername,
                                                sitecode: data.sitecode,
                                                password: data.password,
                                                time: data.time,
                                                email: data.email,
                                                fbname: data.fbname,
                                                language: getGameData.language,
                                                gameCode: getGameData.gameCode,
                                                packageName: getGameData
                                                    .packageName,
                                                os: getGameData.os
                                            },
                                            dataType: 'jsonp',
                                            jsonp: 'callback',
                                            success: function success(res) {
                                                if (res.code == "1400") {

                                                    sessionID = res
                                                        .sessionID;
                                                    $.ajax({
                                                        type: "POST",
                                                        url: Api
                                                            .userMobileAuth_api,
                                                        data: {
                                                            sitecode: getGameData
                                                                .siteCode,
                                                            type: res
                                                                .type,
                                                            os: getGameData
                                                                .os,
                                                            SessionID_LP: res
                                                                .sessionID,
                                                            language: getGameData
                                                                .language,
                                                            gameCode: getGameData
                                                                .gameCode,
                                                            packageName: getGameData
                                                                .packageName,
                                                            packageVersion: packageVersion_str
                                                        },
                                                        dataType: "jsonp",
                                                        success: function success(
                                                            res
                                                        ) {
                                                            console
                                                                .log(
                                                                    res
                                                                );
                                                            var timer =
                                                                new Date()
                                                                .getTime();
                                                            arrData
                                                                [
                                                                    chindex
                                                                ]
                                                                .time =
                                                                timer;
                                                            localStorage
                                                                .setItem(
                                                                    "fbLoginData",
                                                                    JSON
                                                                    .stringify(
                                                                        [arrData[
                                                                            chindex
                                                                        ]]
                                                                    )
                                                                );
                                                            sendData
                                                                =
                                                                JSON
                                                                .stringify(
                                                                    res
                                                                );
                                                            loginCallback
                                                                (
                                                                    sendData
                                                                );
                                                        }
                                                    });
                                                } else {
                                                    alert(res.msg);
                                                }
                                            },
                                            error: function error() {}
                                        });
                                    } else {
                                        alert(data.msg);
                                    }
                                },
                                error: function error() {}
                            });
                        }
                    } else if (arrData[chindex].typename === "Player") {
                        if (arrData[chindex].name === username) {
                            $.ajax({
                                type: "POST",
                                url: Api.userFastLogin_api,
                                data: {
                                    isFirst: "no",
                                    id: arrData[chindex].id,
                                    siteCode: arrData[chindex].siteCode,
                                    t: arrData[chindex].t,
                                    ps: arrData[chindex].ps,
                                    imeiNum: generateUUID(),
                                    xuhaoNum: generateUUID(),
                                    language: gamedata.language,
                                    gameCode: gamedata.gameCode,
                                    packageName: gamedata.packageName,
                                    os: gamedata.os
                                },
                                dataType: "jsonp",
                                beforeSend: function beforeSend(e) {
                                    $(".loading").show();
                                    $(".showad").show();
                                    isClick = false;
                                },
                                success: function success(res) {
                                    console.log(res);
                                    $(".loading").show();
                                    $(".showad").show();
                                    afterClick();
                                    if (res.code === "1400") {

                                        sessionID = res.sessionID;
                                        $.ajax({
                                            type: "POST",
                                            url: Api.userMobileAuth_api,
                                            data: {
                                                sitecode: gamedata.siteCode,
                                                type: res.type,
                                                os: gamedata.os,
                                                SessionID_LP: res.sessionID,
                                                language: gamedata.language,
                                                gameCode: gamedata.gameCode,
                                                packageName: gamedata
                                                    .packageName,
                                                packageVersion: gamedata
                                                    .packageVersion
                                            },
                                            dataType: "jsonp",
                                            beforeSend: function beforeSend(e) {
                                                $(".loading").show();
                                                $(".showad").show();
                                            },
                                            success: function success(res) {
                                                $(".loading").hide();
                                                $(".showad").hide();
                                                var timer = new Date()
                                                    .getTime();
                                                arrData[chindex].time =
                                                    timer;
                                                localStorage.setItem(
                                                    "tryLoginData", JSON
                                                    .stringify([arrData[
                                                        chindex
                                                    ]]));
                                                sendData = JSON.stringify(
                                                    res);
                                                loginCallback(sendData);
                                            }
                                        });
                                    }
                                }
                            });
                        }
                    }
                };

                for (var ch = 0; ch < arrData.length; ch++) {
                    _loop(ch);
                }
            }
        });

        $(".toRule").click(function () {
            $(".bg").show();
        });
    });
</script> -->

</html>

<script src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/js/getWidth.js?type=1.0.1"></script>
<script src="//awscdnflzfzbone.icbem53.com/gc_file/webLogin/login/js/formatting.js?type=1.0.1"></script>
